<!DOCTYPE html>
<html lang="uk" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Новини · UA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #000;
      --surface: #0a0a0a;
      --border: #1a1a1a;
      --text: #e5e5e5;
      --text-muted: #888;
    }
    body {
      font-family: 'Geist', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      -webkit-font-smoothing: antialiased;
    }
    header {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .sidebar {
      transform: translateX(-100%);
      transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1);
    }
    .sidebar.open {
      transform: translateX(0);
    }
    .card {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.55s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }
    img {
      filter: grayscale(90%) contrast(1.1);
      transition: filter 0.5s ease, transform 0.7s ease;
    }
    .card:hover img {
      filter: grayscale(40%) contrast(1.05);
      transform: scale(1.04);
    }
    #scrollToTop {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s, transform 0.3s;
    }
    #scrollToTop.show {
      opacity: 0.6;
      pointer-events: auto;
    }
    #scrollToTop:hover {
      opacity: 1;
      transform: scale(1.1);
    }
  </style>
</head>
<body class="min-h-screen">

  <!-- Header -->
  <header class="fixed top-0 inset-x-0 z-50 bg-black/80 border-b border-[#111] py-4 px-5">
    <div class="flex items-center justify-between max-w-3xl mx-auto">
      <button id="menuBtn" class="text-2xl font-bold">≡</button>
      <h1 class="text-lg font-medium tracking-wider">НОВИНИ</h1>
      <div class="w-8"></div>
    </div>
  </header>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black/85 z-40 hidden transition-opacity duration-500"></div>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar fixed inset-y-0 left-0 w-72 bg-black border-r border-[#111] z-50 flex flex-col">
    <div class="p-6 border-b border-[#111]">
      <button id="closeBtn" class="text-3xl font-light text-gray-600 hover:text-white">×</button>
    </div>
    <nav class="flex-1 px-4 py-8 space-y-2">
      <button data-rss="https://www.pravda.com.ua/rss/" class="w-full text-left px-5 py-4 rounded-lg hover:bg-[#111] transition font-medium text-gray-300 hover:text-white">
        Українська правда
      </button>
      <button data-rss="https://tsn.ua/rss" class="w-full text-left px-5 py-4 rounded-lg hover:bg-[#111] transition font-medium text-gray-300 hover:text-white">
        ТСН
      </button>
      <button data-rss="https://24tv.ua/rss/all.xml" class="w-full text-left px-5 py-4 rounded-lg hover:bg-[#111] transition font-medium text-gray-300 hover:text-white">
        24 Канал
      </button>
    </nav>
  </aside>

  <!-- Content -->
  <main class="pt-20 px-4 max-w-3xl mx-auto pb-16 space-y-8" id="news"></main>

  <!-- Scroll to top -->
  <button id="scrollToTop" class="fixed bottom-6 right-6 w-12 h-12 rounded-full bg-[#111] border border-[#222] text-white flex items-center justify-center text-xl shadow-lg z-40">
    ↑
  </button>

  <script>
    const news = document.getElementById('news');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const menuBtn = document.getElementById('menuBtn');
    const closeBtn = document.getElementById('closeBtn');
    const scrollBtn = document.getElementById('scrollToTop');

    // Menu toggle
    menuBtn.onclick = () => { sidebar.classList.add('open'); overlay.classList.remove('hidden'); };
    closeBtn.onclick = overlay.onclick = () => { sidebar.classList.remove('open'); setTimeout(() => overlay.classList.add('hidden'), 400); };

    // Scroll to top
    window.onscroll = () => {
      scrollBtn.classList.toggle('show', window.scrollY > 300);
    };
    scrollBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

    async function loadNews(rss) {
      news.innerHTML = '';
      // Skeleton
      for (let i = 0; i < 5; i++) {
        news.innerHTML += `
          <div class="card bg-[#0a0a0a] border border-[#111] rounded-xl overflow-hidden">
            <div class="h-52 bg-gradient-to-r from-[#0f0f0f] to-[#1a1a1a] animate-pulse"></div>
            <div class="p-5 space-y-3">
              <div class="h-6 bg-[#111] rounded animate-pulse"></div>
              <div class="h-4 bg-[#111] rounded animate-pulse w-5/6"></div>
              <div class="h-4 bg-[#111] rounded animate-pulse w-4/6"></div>
            </div>
          </div>`;
      }

      try {
        const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rss)}`);
        const { items } = await res.json();

        news.innerHTML = '';

        if (!items?.length) {
          news.innerHTML = '<p class="text-center py-20 text-gray-600 text-lg">Немає новин</p>';
          return;
        }

        items.slice(0, 12).forEach((item, i) => {
          let img = item.enclosure?.url || '';
          if (!img && item.description?.match(/<img/)) {
            img = (item.description.match(/src=["'](.*?)["']/i) || [])[1] || '';
          }

          const card = document.createElement('div');
          card.className = 'card bg-[#0a0a0a] border border-[#111] rounded-xl overflow-hidden hover:border-gray-700 transition-all';
          card.innerHTML = `
            ${img ? `
              <div class="h-52 overflow-hidden bg-black">
                <img src="${img}" alt loading="lazy" class="w-full h-full object-cover">
              </div>
            ` : `
              <div class="h-52 bg-[#0d0d0d] flex items-center justify-center text-gray-700 text-sm">
                без фото
              </div>
            `}
            <div class="p-5">
              <h2 class="text-xl font-medium leading-tight mb-2 line-clamp-2">
                ${item.title}
              </h2>
              <p class="text-gray-400 text-[15px] leading-relaxed line-clamp-3 mb-4">
                ${item.description?.replace(/<[^>]+>/g, '').substring(0, 180).trim() || '…'}…
              </p>
              <a href="${item.link}" target="_blank" class="text-gray-300 hover:text-white text-sm uppercase tracking-wide">
                Читати →
              </a>
            </div>
          `;

          news.appendChild(card);
          setTimeout(() => card.classList.add('visible'), i * 80);
        });

      } catch (e) {
        news.innerHTML = `<p class="text-center py-20 text-gray-600">Помилка завантаження</p>`;
      }
    }

    // Початкове завантаження
    loadNews('https://www.pravda.com.ua/rss/');

    // Обробка вибору джерела
    document.querySelectorAll('[data-rss]').forEach(btn => {
      btn.onclick = () => loadNews(btn.dataset.rss);
    });
  </script>
</body>
</html>
