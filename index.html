<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FANTASYAS - Соціальна Мережа</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    :root {
      --bg: #0a0a0a;
      --text: #f0f0f0;
      --text-sec: #a0a0a0;
      --card: #1a1a1a;
      --border: #333;
      --shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    body.light {
      --bg: #fff;
      --text: #1a1a1a;
      --text-sec: #666;
      --card: #f4f4f4;
      --border: #ccc;
      --shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Manrope',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;transition:all 0.5s ease;}

    /* Анімації */
    @keyframes fadeIn {0%{opacity:0;}100%{opacity:1;}}
    @keyframes slideInLeft {0%{opacity:0;transform:translateX(-50px);}100%{opacity:1;transform:translateX(0);}}
    @keyframes bounceIn {0%{transform:scale(0.8);opacity:0;}50%{transform:scale(1.1);}100%{transform:scale(1);opacity:1;}}
    @keyframes pulse {0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
    @keyframes rotateIn {0%{transform:rotate(-180deg);opacity:0;}100%{transform:rotate(0);opacity:1;}}
    .fade-in{animation:fadeIn 0.8s ease-in-out;}
    .slide-in{animation:slideInLeft 0.6s ease-out;}
    .bounce{animation:bounceIn 0.7s ease;}
    .pulse{animation:pulse 1.5s infinite;}
    .rotate{animation:rotateIn 0.9s ease-in-out;}

    /* Верхня панель */
    .top-bar{position:fixed;top:0;left:0;right:0;height:60px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;background:rgba(10,10,10,0.95);backdrop-filter:blur(20px);z-index:1000;box-shadow:var(--shadow);transition:all 0.4s ease;}
    body.light .top-bar{background:rgba(255,255,255,0.95);}
    .site-name{font-size:1.8rem;font-weight:800;color:var(--text);}
    .burger{cursor:pointer;width:30px;height:22px;display:flex;flex-direction:column;justify-content:space-between;}
    .burger span{height:3px;background:var(--text);transition:all 0.4s;border-radius:2px;}
    .burger.active span:nth-child(1){transform:rotate(45deg) translate(6px,6px);}
    .burger.active span:nth-child(2){opacity:0;}
    .burger.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-7px);}

    /* Бокова панель */
    .sidebar{position:fixed;top:0;left:-300px;width:300px;height:100%;background:var(--card);padding:80px 25px;transition:left 0.6s cubic-bezier(0.68,-0.55,0.265,1.55);z-index:900;box-shadow:var(--shadow);}
    .sidebar.active{left:0;}
    .sidebar a{display:flex;align-items:center;gap:15px;color:var(--text-sec);text-decoration:none;font-size:1.2rem;font-weight:600;margin:15px 0;padding:10px 15px;border-radius:12px;transition:all 0.3s ease;}
    .sidebar a:hover{background:var(--border);color:var(--text);transform:translateX(10px);box-shadow:var(--shadow);}

    /* Основний контент */
    .main-content{margin-top:70px;padding:25px;max-width:900px;margin:0 auto;}
    .section{display:none;}
    .section.active{display:block;animation:fadeIn 0.8s ease;}
    .card{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:25px;margin-bottom:25px;transition:transform 0.4s ease,box-shadow 0.4s ease;box-shadow:var(--shadow);}
    .card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,0.2);}
    input, textarea{width:100%;padding:15px;margin:10px 0;border:1px solid var(--border);border-radius:15px;background:var(--card);color:var(--text);font-size:1rem;transition:all 0.3s ease;}
    input:focus, textarea:focus{border-color:var(--text-sec);box-shadow:0 0 15px rgba(255,255,255,0.1);}
    button{padding:12px 25px;border:none;border-radius:15px;background:var(--border);color:var(--text);font-weight:700;cursor:pointer;transition:all 0.4s ease;}
    button:hover{background:var(--text-sec);transform:scale(1.05) rotate(2deg);box-shadow:0 0 20px rgba(255,255,255,0.1);}
    .feed{display:flex;flex-direction:column;gap:25px;}
    .post{background:var(--card);border-radius:20px;padding:20px;box-shadow:var(--shadow);transition:all 0.5s ease;animation:slideInLeft 0.6s ease-out;}
    .post:hover{transform:scale(1.02);box-shadow:0 15px 40px rgba(255,255,255,0.1);}
    .avatar{width:50px;height:50px;border-radius:50%;background:#444;background-size:cover;border:2px solid var(--border);transition:transform 0.3s ease;}
    .avatar:hover{transform:rotate(360deg);}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:2000;animation:fadeIn 0.6s ease;}
    .modal.active{display:flex;}
    .modal-content{background:var(--card);border-radius:25px;padding:30px;width:90%;max-width:600px;box-shadow:var(--shadow);animation:bounceIn 0.8s ease;}
    @media (max-width:768px){.sidebar{width:100%;left:-100%;}.main-content{padding:15px;}}
    @media (min-width:1920px){.main-content{max-width:1400px;padding:50px;}.card{padding:40px;}}
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="burger" id="burger"><span></span><span></span><span></span></div>
    <div class="site-name">FANTASYAS</div>
  </div>

  <nav class="sidebar" id="sidebar">
    <a data-section="home"><i class="fas fa-home"></i> Головна</a>
    <a data-section="search"><i class="fas fa-search"></i> Пошук</a>
    <a data-section="profile"><i class="fas fa-user"></i> Профіль</a>
    <a data-section="chat"><i class="fas fa-comments"></i> Чати</a>
    <a data-section="settings"><i class="fas fa-cog"></i> Налаштування</a>
  </nav>

  <main class="main-content">
    <section id="home" class="section active">
      <div class="card" id="auth-card">
        <div id="login-form">
          <h2 class="fade-in">Вхід</h2>
          <input id="login-nick" placeholder="Псевдонім" class="slide-in">
          <input id="login-pass" type="password" placeholder="Пароль" class="slide-in">
          <button id="login-btn" class="bounce">Увійти</button>
          <p class="fade-in">Немає акаунта? <span id="to-reg" class="pulse">Зареєструватись</span></p>
        </div>
        <div id="reg-form" style="display:none;">
          <h2 class="fade-in">Реєстрація</h2>
          <input id="reg-nick" placeholder="Псевдонім" class="slide-in">
          <input id="reg-pass" type="password" placeholder="Пароль" class="slide-in">
          <button id="reg-btn" class="bounce">Зареєструватись</button>
          <p class="fade-in">Є акаунт? <span id="to-login" class="pulse">Увійти</span></p>
        </div>
      </div>

      <div class="card" id="post-form" style="display:none;">
        <textarea id="post-text" placeholder="Створи пост..." class="slide-in"></textarea>
        <button id="submit-post" class="rotate">Опублікувати</button>
      </div>

      <div class="feed" id="feed"></div>
    </section>

    <section id="profile" class="section">
      <div class="card fade-in">
        <div class="avatar" id="profile-avatar"></div>
        <h2 id="profile-nick">@псевдонім</h2>
        <p id="profile-bio">Тут короткий опис про себе</p>
      </div>
      <div class="feed" id="profile-posts"></div>
    </section>

    <section id="settings" class="section">
      <div class="card fade-in">
        <h2>Налаштування</h2>
        <div class="settings-group">
          <h3>Акаунт</h3>
          <input id="set-nick" placeholder="Змінити псевдонім">
          <input id="set-pass" type="password" placeholder="Змінити пароль">
          <input id="set-bio" placeholder="Коротко про себе">
          <button id="save-account">Зберегти акаунт</button>
        </div>
        <div class="settings-group">
          <h3>Тема</h3>
          <button id="toggle-theme">Світла / Темна тема</button>
        </div>
      </div>
    </section>
  </main>

  <script>
let db;
const request=indexedDB.open('FantasyasDB',1);
request.onupgradeneeded=e=>{db=e.target.result;db.createObjectStore('users',{keyPath:'nick'});db.createObjectStore('posts',{autoIncrement:true});}
request.onsuccess=e=>{db=e.target.result;initApp();}
let currentUser=localStorage.getItem('user');

function initApp(){
  const burger=document.getElementById('burger');
  const sidebar=document.getElementById('sidebar');
  burger.addEventListener('click',()=>{burger.classList.toggle('active');sidebar.classList.toggle('active');});
  document.querySelectorAll('.sidebar a').forEach(a=>{a.addEventListener('click',()=>{document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById(a.dataset.section).classList.add('active');sidebar.classList.remove('active');burger.classList.remove('active');if(a.dataset.section==='profile') loadProfile();});});
  document.getElementById('to-reg').addEventListener('click',()=>{document.getElementById('login-form').style.display='none';document.getElementById('reg-form').style.display='block';});
  document.getElementById('to-login').addEventListener('click',()=>{document.getElementById('reg-form').style.display='none';document.getElementById('login-form').style.display='block';});

  document.getElementById('reg-btn').addEventListener('click',()=>{
    const nick=document.getElementById('reg-nick').value.trim();
    const pass=document.getElementById('reg-pass').value.trim();
    if(!nick||!pass)return alert('Заповніть поля');
    const tx=db.transaction('users','readwrite').objectStore('users');
    tx.get(nick).onsuccess=e=>{if(e.target.result)return alert('Нік зайнятий');tx.add({nick,pass,bio:'',avatar:'',posts:[]});alert('Реєстрація успішна!');document.getElementById('to-login').click();};
  });

  document.getElementById('login-btn').addEventListener('click',()=>{
    const nick=document.getElementById('login-nick').value.trim();
    const pass=document.getElementById('login-pass').value.trim();
    const tx=db.transaction('users').objectStore('users');
    tx.get(nick).onsuccess=e=>{const user=e.target.result;if(!user||user.pass!==pass)return alert('Невірні дані');currentUser=nick;localStorage.setItem('user',nick);document.getElementById('auth-card').style.display='none';document.getElementById('post-form').style.display='block';loadPosts();};
  });

  document.getElementById('submit-post').addEventListener('click',()=>{
    const text=document.getElementById('post-text').value.trim();
    if(!text)return alert('Напишіть пост');
    const post={author:currentUser,text,created:Date.now()};
    const tx=db.transaction('posts','readwrite').objectStore('posts');tx.add(post);
    tx.transaction.oncomplete=()=>{document.getElementById('post-text').value='';loadPosts();}
  });

  function loadPosts(){
    const feed=document.getElementById('feed'); feed.innerHTML='';
    const tx=db.transaction('posts').objectStore('posts');
    tx.openCursor(null,'prev').onsuccess=e=>{
      let cursor=e.target.result;
      if(cursor){
        const post=cursor.value;
        const div=document.createElement('div');
        div.className='post card';
        div.innerHTML=`<div class="post-header"><div class="avatar"></div><strong>@${post.author}</strong></div><p>${post.text}</p>`;
        feed.appendChild(div);
        cursor.continue();
      }
    };
  }

  function loadProfile(){
    if(!currentUser)return alert('Увійдіть!');
    const tx=db.transaction('users').objectStore('users');
    tx.get(currentUser).onsuccess=e=>{
      const user=e.target.result;
      document.getElementById('profile-nick').textContent='@'+user.nick;
      document.getElementById('profile-bio').textContent=user.bio||'Тут короткий опис про себе';
      const profilePosts=document.getElementById('profile-posts'); profilePosts.innerHTML='';
      const tx2=db.transaction('posts').objectStore('posts');
      tx2.openCursor(null,'prev').onsuccess=ee=>{
        let cursor=ee.target.result;
        if(cursor){
          const post=cursor.value;
          if(post.author===currentUser){
            const div=document.createElement('div');
            div.className='post card';
            div.innerHTML=`<p>${post.text}</p>`;
            profilePosts.appendChild(div);
          }
          cursor.continue();
        }
      };
    };
  }

  document.getElementById('save-account').addEventListener('click',()=>{
    const nick=document.getElementById('set-nick').value.trim();
    const pass=document.getElementById('set-pass').value.trim();
    const bio=document.getElementById('set-bio').value.trim();
    if(!currentUser)return alert('Увійдіть!');
    const tx=db.transaction('users','readwrite').objectStore('users');
    tx.get(currentUser).onsuccess=e=>{
      const user=e.target.result;
      if(nick) user.nick=nick;
      if(pass) user.pass=pass;
      user.bio=bio;
      tx.put(user);
      alert('Збережено!');
      currentUser=user.nick; localStorage.setItem('user',currentUser);
      loadProfile();
    };
  });

  document.getElementById('toggle-theme').addEventListener('click',()=>{document.body.classList.toggle('light');});
}
  </script>
</body>
</html>
