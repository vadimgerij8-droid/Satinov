<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ù–æ–≤–∏–Ω–∏ –£–∫—Ä–∞—ó–Ω–∏</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(to bottom, #0f0f11, #17171b);
      color: #e5e7eb;
    }
    .sidebar {
      transform: translateX(-100%);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .sidebar.open {
      transform: translateX(0);
    }
    .card {
      transition: all 0.3s ease;
      opacity: 0;
      transform: translateY(20px);
    }
    .card.loaded {
      opacity: 1;
      transform: translateY(0);
    }
    .skeleton {
      background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    img {
      object-fit: cover;
    }
  </style>
</head>
<body class="min-h-screen pb-12">

  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-neutral-900/90 backdrop-blur-md border-b border-neutral-800/50">
    <div class="flex items-center justify-between px-5 py-4">
      <button id="menuBtn" class="text-2xl font-bold text-white hover:text-blue-400 transition-colors">
        ‚ò∞
      </button>
      <h1 class="text-xl font-semibold tracking-tight">
        –ù–æ–≤–∏–Ω–∏ <span class="text-blue-400">–£–∫—Ä–∞—ó–Ω–∏</span>
      </h1>
      <div class="w-8"></div> <!-- placeholder for symmetry -->
    </div>
  </header>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black/70 z-40 hidden transition-opacity duration-400"></div>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar fixed inset-y-0 left-0 w-72 bg-neutral-900/95 backdrop-blur-lg border-r border-neutral-800/60 z-50 flex flex-col">
    <div class="p-6 border-b border-neutral-800/50">
      <button id="closeBtn" class="text-3xl text-gray-400 hover:text-white transition-colors">
        √ó
      </button>
    </div>
    <nav class="flex-1 px-4 py-6 space-y-2">
      <button data-rss="https://www.pravda.com.ua/rss/" class="w-full text-left px-5 py-4 rounded-xl bg-neutral-800/60 hover:bg-blue-600/30 hover:text-blue-300 transition-all font-medium">
        –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –ø—Ä–∞–≤–¥–∞
      </button>
      <button data-rss="https://tsn.ua/rss" class="w-full text-left px-5 py-4 rounded-xl bg-neutral-800/60 hover:bg-blue-600/30 hover:text-blue-300 transition-all font-medium">
        –¢–°–ù
      </button>
      <button data-rss="https://24tv.ua/rss/all.xml" class="w-full text-left px-5 py-4 rounded-xl bg-neutral-800/60 hover:bg-blue-600/30 hover:text-blue-300 transition-all font-medium">
        24 –ö–∞–Ω–∞–ª
      </button>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="pt-20 px-4 max-w-3xl mx-auto space-y-6">
    <div id="news" class="grid gap-5"></div>
  </main>

  <script>
    const newsContainer = document.getElementById('news');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const menuBtn = document.getElementById('menuBtn');
    const closeBtn = document.getElementById('closeBtn');

    // –í—ñ–¥–∫—Ä–∏—Ç—Ç—è / –∑–∞–∫—Ä–∏—Ç—Ç—è –º–µ–Ω—é
    menuBtn.addEventListener('click', () => {
      sidebar.classList.add('open');
      overlay.classList.remove('hidden');
    });

    closeBtn.addEventListener('click', closeMenu);
    overlay.addEventListener('click', closeMenu);

    function closeMenu() {
      sidebar.classList.remove('open');
      overlay.classList.add('hidden');
    }

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω
    async function loadNews(rssUrl) {
      closeMenu();
      newsContainer.innerHTML = '';

      // –°–∫–µ–ª–µ—Ç–æ–Ω (placeholder) –¥–ª—è 6 –Ω–æ–≤–∏–Ω
      for (let i = 0; i < 6; i++) {
        newsContainer.innerHTML += `
          <div class="card rounded-2xl overflow-hidden bg-neutral-800/40 border border-neutral-700/50">
            <div class="skeleton h-48 w-full"></div>
            <div class="p-5 space-y-3">
              <div class="skeleton h-6 w-4/5 rounded"></div>
              <div class="skeleton h-4 w-full rounded"></div>
              <div class="skeleton h-4 w-5/6 rounded"></div>
            </div>
          </div>
        `;
      }

      try {
        const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
        const response = await fetch(proxyUrl);
        if (!response.ok) throw new Error('–ü—Ä–æ–±–ª–µ–º–∞ –∑ –º–µ—Ä–µ–∂–µ—é');

        const data = await response.json();

        newsContainer.innerHTML = '';

        if (!data.items || data.items.length === 0) {
          newsContainer.innerHTML = `<p class="text-center text-gray-400 py-12">–ù–µ–º–∞—î –Ω–æ–≤–∏–Ω –∑–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç...</p>`;
          return;
        }

        data.items.slice(0, 12).forEach((item, index) => {
          let image = '';
          if (item.enclosure && item.enclosure.url) {
            image = item.enclosure.url;
          } else if (item.description?.includes('<img')) {
            const match = item.description.match(/src=["'](.*?)["']/);
            if (match) image = match[1];
          }

          const card = document.createElement('div');
          card.className = 'card rounded-2xl overflow-hidden bg-neutral-800/40 border border-neutral-700/50 hover:border-blue-600/50 hover:shadow-xl hover:shadow-blue-900/20';
          card.style.transitionDelay = `${index * 80}ms`;

          card.innerHTML = `
            ${image ? `
              <div class="relative h-48 overflow-hidden">
                <img src="${image}" alt="${item.title}" class="w-full h-full object-cover transition-transform duration-700 hover:scale-105">
              </div>
            ` : `
              <div class="h-48 bg-gradient-to-br from-neutral-700 to-neutral-900 flex items-center justify-center text-gray-500">
                –±–µ–∑ —Ñ–æ—Ç–æ
              </div>
            `}
            <div class="p-5">
              <h2 class="font-semibold text-lg leading-tight line-clamp-2 mb-3">
                ${item.title}
              </h2>
              <p class="text-sm text-gray-400 line-clamp-3 mb-4">
                ${item.description?.replace(/<[^>]+>/g, '').substring(0, 160) || '–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π'}‚Ä¶
              </p>
              <a href="${item.link}" target="_blank" rel="noopener noreferrer"
                 class="inline-flex items-center text-blue-400 hover:text-blue-300 font-medium transition-colors">
                –ß–∏—Ç–∞—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é ‚Üí
              </a>
            </div>
          `;

          newsContainer.appendChild(card);

          // –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏
          setTimeout(() => card.classList.add('loaded'), 100);
        });

      } catch (err) {
        newsContainer.innerHTML = `
          <div class="text-center py-16 text-gray-400">
            <p class="text-xl mb-2">üòî –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫...</p>
            <p>${err.message}</p>
          </div>
        `;
      }
    }

    // –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    loadNews('https://www.pravda.com.ua/rss/');

    // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø–æ –ø—É–Ω–∫—Ç–∞—Ö –º–µ–Ω—é
    document.querySelectorAll('[data-rss]').forEach(btn => {
      btn.addEventListener('click', () => {
        const rss = btn.getAttribute('data-rss');
        loadNews(rss);
      });
    });
  </script>
</body>
</html>
