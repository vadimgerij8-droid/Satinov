<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FANTASYAS</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700;800&display=swap" rel="stylesheet"/>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    :root {
      --bg: #000;
      --text: #fff;
      --text-secondary: #ccc;
      --card-bg: rgba(255,255,255,0.06);
      --card-border: rgba(255,255,255,0.12);
      --input-bg: rgba(255,255,255,0.08);
      --input-border: rgba(255,255,255,0.18);
      --btn-bg: linear-gradient(to right,#333,#555);
      --btn-hover: linear-gradient(to right,#444,#666);
      --accent: #0af;
    }

    body.light {
      --bg: #fff;
      --text: #111;
      --text-secondary: #555;
      --card-bg: rgba(0,0,0,0.04);
      --card-border: rgba(0,0,0,0.1);
      --input-bg: #fff;
      --input-border: #d0d0d0;
      --btn-bg: linear-gradient(to right,#ddd,#bbb);
      --btn-hover: linear-gradient(to right,#ccc,#aaa);
      --accent: #0066cc;
    }

    * { margin:0; padding:0; box-sizing:border-box; font-family:'Manrope',sans-serif; }
    body { background:var(--bg); color:var(--text); min-height:100vh; transition:.4s; }

    .top-bar {
      position:fixed; top:0; left:0; right:0; height:70px;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 20px; background:rgba(0,0,0,0.6); backdrop-filter:blur(8px);
      z-index:1000; transition:.3s;
    }
    body.light .top-bar { background:rgba(255,255,255,0.92); }

    .site-name {
      font-size:1.8rem; font-weight:800;
      background:linear-gradient(90deg,#fff,#bbb);
      -webkit-background-clip:text; color:transparent; -webkit-text-fill-color:transparent;
    }
    body.light .site-name { background:linear-gradient(90deg,#111,#444); }

    .burger { width:32px; height:24px; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer; }
    .burger span { height:3px; width:100%; background:var(--text); border-radius:2px; transition:all .35s; }
    .burger.active span:nth-child(1) { transform:rotate(45deg) translate(7px,7px); }
    .burger.active span:nth-child(2) { opacity:0; }
    .burger.active span:nth-child(3) { transform:rotate(-45deg) translate(6px,-6px); }

    .sidebar {
      position:fixed; top:0; left:-300px; width:280px; height:100%;
      background:rgba(0,0,0,0.5); backdrop-filter:blur(12px);
      padding:90px 28px; border-right:1px solid var(--card-border);
      transition:left .4s ease; z-index:900;
    }
    body.light .sidebar { background:rgba(255,255,255,0.5); }
    .sidebar.active { left:0; }

    .sidebar a {
      display:block; color:var(--text-secondary); text-decoration:none;
      font-size:1.22rem; font-weight:600; margin:1.4rem 0; transition:.25s;
    }
    .sidebar a:hover { color:var(--text); transform:translateX(8px); }

    .main-content { margin-top:90px; padding:20px; max-width:720px; margin-left:auto; margin-right:auto; }

    .section { display:none; opacity:0; transform:translateY(12px); transition:.35s; }
    .section.active { display:block; opacity:1; transform:translateY(0); }

    .card { background:var(--card-bg); border:1px solid var(--card-border); border-radius:14px; padding:20px; margin-bottom:20px; transition:.2s; }

    input, textarea {
      width:100%; padding:12px 14px; border-radius:10px;
      border:1px solid var(--input-border); background:var(--input-bg);
      color:var(--text); font-size:1rem; outline:none; transition:.2s;
    }
    input:focus, textarea:focus { border-color:var(--accent); }
    textarea { resize:vertical; min-height:96px; }
    ::placeholder { color:var(--text-secondary); opacity:.7; }

    button {
      padding:11px 20px; border:none; border-radius:10px;
      background:var(--btn-bg); color:white; font-weight:700;
      cursor:pointer; transition:.22s; box-shadow:0 2px 8px rgba(0,0,0,0.2);
    }
    button:hover { background:var(--btn-hover); opacity:.92; transform:scale(1.03); }
    button:active { transform:scale(0.97); }

    .feed { display:flex; flex-direction:column; gap:18px; }

    .post {
      background:var(--card-bg); border:1px solid var(--card-border);
      border-radius:12px; padding:16px; opacity:0; transform:translateY(24px); transition:.5s;
    }
    .post.show { opacity:1; transform:translateY(0); }

    .post-header { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
    .avatar {
      width:48px; height:48px; border-radius:50%; background:#555;
      background-size:cover; background-position:center; flex-shrink:0;
      border:1px solid var(--card-border);
    }
    body.light .avatar { background:#ccc; }

    .username { font-weight:700; font-size:1.05rem; }
    .post-content { line-height:1.5; word-break:break-word; color:var(--text); }
    .post-media img, .post-media video { width:100%; border-radius:12px; margin-top:12px; }

    .post-footer { display:flex; gap:24px; margin-top:12px; }
    .post-footer button { background:none; color:var(--text-secondary); font-size:.95rem; padding:0; box-shadow:none; }
    .post-footer button:hover { color:var(--text); transform:scale(1.1); }
    .post-footer .like-btn { display:flex; align-items:center; gap:4px; }

    .menu-btn { background:none; color:var(--text-secondary); font-size:1.4rem; cursor:pointer; margin-left:auto; }

    .emoji-panel {
      position: absolute; bottom: 36px; left: 0;
      background: var(--card-bg); border: 1px solid var(--card-border);
      border-radius: 12px; display: flex; gap: 6px; padding: 8px;
      opacity: 0; transform: scale(0.7); pointer-events: none;
      transition: all 0.25s; z-index: 100;
    }
    .emoji-panel.active {
      opacity: 1; transform: scale(1); pointer-events: auto;
    }
    .emoji-panel span {
      cursor: pointer; font-size: 1.4rem; transition: transform 0.15s;
    }
    .emoji-panel span:hover { transform: scale(1.3); }

    @keyframes postShow {
      0%   { opacity:0; transform:translateY(24px) scale(0.97); }
      60%  { opacity:1; transform:translateY(-8px) scale(1.02); }
      100% { transform:translateY(0) scale(1); }
    }

    .modal { position:fixed; inset:0; background:rgba(0,0,0,0.75); display:none; align-items:center; justify-content:center; z-index:2000; }
    body.light .modal { background:rgba(255,255,255,0.75); }
    .modal.active { display:flex; }
    .modal-content { background:var(--card-bg); border:1px solid var(--card-border); color:var(--text); width:92%; max-width:520px; border-radius:16px; padding:28px 24px; position:relative; }
    .modal-content h2 { color:var(--text); margin-bottom:20px; }
    .close-modal { position:absolute; top:16px; right:20px; font-size:2rem; cursor:pointer; color:var(--text-secondary); }

    @media (max-width:900px) {
      .sidebar { width:100%; left:-100%; border-right:none; }
      .main-content { padding:16px; margin-top:80px; }
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <div class="site-name">FANTASYAS</div>
    <div class="burger">
      <span></span><span></span><span></span>
    </div>
  </div>

  <div class="sidebar" id="sidebar">
    <a href="#feed" class="menu-feed">–°—Ç—Ä—ñ—á–∫–∞</a>
    <a href="#search" class="menu-search">–ü–æ—à—É–∫</a>
    <a href="#profile" class="menu-profile">–ü—Ä–æ—Ñ—ñ–ª—å</a>
    <a href="#chats" class="menu-chats">–ß–∞—Ç–∏</a>
  </div>

  <div class="main-content">

    <div id="feed" class="section feed active">
      <!-- –ø–æ—Å—Ç–∏ –¥–æ–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
    </div>

    <!-- —ñ–Ω—à—ñ —Å–µ–∫—Ü—ñ—ó (search, profile, chats) –¥–æ–¥–∞–≤–∞–π—Ç–µ –∑–∞ –ø–æ—Ç—Ä–µ–±–æ—é -->
    <div id="profile" class="section">
      <div class="profile-header">
        <div class="profile-avatar" id="profileAvatar"></div>
        <div>
          <h2 id="profileUsernameDisplay">@username</h2>
          <p id="profileBio">–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è...</p>
          <div>
            <span id="postsCount">–ü–æ—Å—Ç–∏: 0</span> ‚Ä¢
            <span id="followersCount">–ü—ñ–¥–ø–∏—Å–Ω–∏–∫–∏: 0</span> ‚Ä¢
            <span id="followingCount">–ü—ñ–¥–ø–∏—Å–∫–∏: 0</span>
          </div>
          <button id="editProfileBtn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
        </div>
      </div>
    </div>

  </div>

  <script type="module">
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –í–∞–∂–ª–∏–≤–æ: —Ç—É—Ç –ª–∏—à–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–¥–µ–º–æ
    // –î–ª—è —Ä–µ–∞–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω Firebase (db, auth, storage)
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    let currentUser = null;           // —Å–∏–º—É–ª—è—Ü—ñ—è
    let currentChatPartner = null;
    let unsubscribeFeed = null;
    let unsubscribeChat = null;

    // –Ü–º—ñ—Ç–∞—Ü—ñ—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    currentUser = { uid: "demoUser123", displayName: "–í–∞–¥–∏–º", nickname: "vadym" };

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—Å—Ç—ñ–≤
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function showPostAnimation(postEl, delay = 0) {
      postEl.style.animation = `postShow 0.6s ease forwards`;
      postEl.style.animationDelay = `${delay}ms`;
    }

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –Ü–º—ñ—Ç–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—ñ—á–∫–∏
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function subscribeToFeed() {
      const feed = document.getElementById('feed');
      feed.innerHTML = '';

      // –ü—Ä–∏–∫–ª–∞–¥ —Ñ–µ–π–∫–æ–≤–∏—Ö –ø–æ—Å—Ç—ñ–≤ (–∑–∞–º—ñ—Å—Ç—å firestore)
      const fakePosts = [
        { id:"p1", text:"–ü—Ä–∏–≤—ñ—Ç, —Ü–µ —Ç–µ—Å—Ç–æ–≤–∏–π –ø–æ—Å—Ç!", author:"demoUser123", likes:[], comments:[] },
        { id:"p2", text:"–î—É–∂–µ –≥–∞—Ä–Ω–∏–π –¥–µ–Ω—å —Å—å–æ–≥–æ–¥–Ω—ñ ‚òÄÔ∏è", author:"otherUser456", likes:["demoUser123"], comments:["–ö–ª–∞—Å!"] }
      ];

      let delay = 0;
      fakePosts.forEach(postData => {
        const postEl = document.createElement('div');
        postEl.className = 'post';
        postEl.innerHTML = `
          <div class="post-header">
            <div class="avatar"></div>
            <div class="username">@${postData.author === currentUser.uid ? currentUser.nickname : '—ñ–Ω—à–∏–π'}</div>
            ${postData.author === currentUser.uid ? `<button class="menu-btn">‚ãØ</button>` : ''}
          </div>
          <div class="post-content">${postData.text.replace(/\n/g,'<br>')}</div>
          <div class="post-footer">
            <button class="like-btn ${postData.likes.includes(currentUser.uid) ? 'liked' : ''}">
              <lottie-player src="https://lottie.host/4c45f979-7b26-4d5b-a930-90d4f5a1f7a6/5W9G0tXg7x.json" background="transparent" speed="1" style="width:24px;height:24px;"></lottie-player>
              ${postData.likes.length}
            </button>
            <button>üí¨ ${postData.comments.length}</button>
            <button>üîó –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</button>
            <button class="emoji-btn">üòÄ –ï–º–æ–¥–∂—ñ</button>
          </div>
          <div class="emoji-panel"></div>
        `;

        feed.appendChild(postEl);
        showPostAnimation(postEl, delay);
        delay += 80;

        // –∫–ª—ñ–∫ –ø–æ –µ–º–æ–¥–∑—ñ-–∫–Ω–æ–ø—Ü—ñ
        postEl.querySelector('.emoji-btn').onclick = (e) => {
          let panel = postEl.querySelector('.emoji-panel');
          if (!panel.innerHTML) {
            panel.innerHTML = ['üòÄ','üòÇ','üòç','üò¢','üò°','üëç','üëé'].map(em => `<span>${em}</span>`).join('');
            panel.querySelectorAll('span').forEach(sp => {
              sp.onclick = () => {
                alert(`–û–±—Ä–∞–Ω–æ: ${sp.textContent}`);
                panel.classList.remove('active');
              };
            });
          }
          panel.classList.toggle('active');
        };
      });
    }

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø—Ä–æ—Ñ—ñ–ª—é (–¥–µ–º–æ)
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function openUserProfile(uid) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById('profile').classList.add('active');

      document.getElementById('profileUsernameDisplay').textContent = `@${uid === currentUser.uid ? currentUser.nickname : '–≥—ñ—Å—Ç—å'}`;
      document.getElementById('profileAvatar').style.backgroundImage = `url(https://i.pravatar.cc/150?u=${uid})`;
    }

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.querySelector('.burger').onclick = () => {
      document.querySelector('.burger').classList.toggle('active');
      document.getElementById('sidebar').classList.toggle('active');
    };

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    subscribeToFeed();

    // –ü—Ä–∏–∫–ª–∞–¥: –∫–ª—ñ–∫ –ø–æ —ñ–º–µ–Ω—ñ ‚Üí –ø—Ä–æ—Ñ—ñ–ª—å
    document.addEventListener('click', e => {
      const username = e.target.closest('.username, .avatar');
      if (username) {
        // —Ç—É—Ç –º–∞—î –±—É—Ç–∏ uid –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞
        openUserProfile("someUserId");
      }
    });

  </script>
</body>
</html>
