<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
  <title>FANTASYAS ¬∑ —Å—É—á–∞—Å–Ω–∞ —Å–æ—Ü—ñ–∞–ª—å–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    /* ========== –ì–õ–û–ë–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Manrope', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --bg: #ffffff;
      --surface: #f5f5f7;
      --card: #ffffff;
      --border: #e0e0e0;
      --text-primary: #1c1c1e;
      --text-secondary: #6c6c70;
      --text-tertiary: #8e8e93;
      --accent: #000000;
      --accent-hover: #333333;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
      --transition: 0.2s ease;
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --sidebar-width: 280px;
      --header-height: 60px;
    }

    body.dark {
      --bg: #000000;
      --surface: #1c1c1e;
      --card: #2c2c2e;
      --border: #3a3a3c;
      --text-primary: #ffffff;
      --text-secondary: #8e8e93;
      --text-tertiary: #666668;
      --accent: #ffffff;
      --accent-hover: #e0e0e0;
      --shadow-sm: 0 2px 8px rgba(255,255,255,0.04);
      --shadow-md: 0 4px 16px rgba(255,255,255,0.08);
      --shadow-lg: 0 8px 24px rgba(255,255,255,0.12);
    }

    body {
      background: var(--bg);
      color: var(--text-primary);
      min-height: 100vh;
      transition: background var(--transition), color var(--transition);
      font-size: 16px;
      line-height: 1.5;
    }

    /* ========== LAYOUT ========== */
    .app {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 20px 0;
      overflow-y: auto;
      transition: transform var(--transition);
      z-index: 1000;
    }

    .sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      color: var(--text-primary);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 20px;
      margin: 4px 8px;
      border-radius: var(--radius-md);
      color: var(--text-secondary);
      transition: all var(--transition);
      cursor: pointer;
      font-weight: 500;
    }

    .nav-item:hover {
      background: var(--card);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: var(--accent);
      color: var(--bg);
    }

    .nav-item .icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 1.8;
      fill: none;
    }

    .nav-item .badge {
      margin-left: auto;
      background: var(--accent);
      color: var(--bg);
      padding: 2px 8px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    /* Main content */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: var(--bg);
    }

    .top-bar {
      height: var(--header-height);
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 20px;
      gap: 16px;
    }

    .menu-toggle {
      display: none;
      width: 28px;
      height: 20px;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
    }

    .menu-toggle span {
      height: 2px;
      width: 100%;
      background: var(--text-primary);
      border-radius: 2px;
      transition: transform var(--transition);
    }

    .menu-toggle.active span:nth-child(1) { transform: rotate(45deg) translate(6px, 5px); }
    .menu-toggle.active span:nth-child(2) { opacity: 0; }
    .menu-toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(6px, -5px); }

    .top-bar-title {
      font-size: 1.4rem;
      font-weight: 700;
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    /* –°–µ–∫—Ü—ñ—ó: –ø—Ä–∏—Ö–æ–≤—É—î–º–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ */
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }

    /* Mobile sidebar */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        transform: translateX(-100%);
      }
      .sidebar.open {
        transform: translateX(0);
      }
      .menu-toggle {
        display: flex;
      }
    }

    /* ========== –ö–û–ú–ü–û–ù–ï–ù–¢–ò ========== */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--transition), transform var(--transition);
    }

    .card:hover {
      box-shadow: var(--shadow-md);
    }

    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--surface);
      background-size: cover;
      background-position: center;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: border-color var(--transition);
    }

    .avatar.small {
      width: 32px;
      height: 32px;
    }

    .avatar.large {
      width: 80px;
      height: 80px;
    }

    .avatar.online::after {
      content: '';
      display: block;
      width: 10px;
      height: 10px;
      background: #4caf50;
      border-radius: 50%;
      border: 2px solid var(--card);
      position: relative;
      bottom: 12px;
      left: 36px;
    }

    .btn {
      padding: 10px 18px;
      border-radius: var(--radius-md);
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text-primary);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn:hover {
      background: var(--accent);
      color: var(--bg);
      border-color: var(--accent);
    }

    .btn-primary {
      background: var(--accent);
      color: var(--bg);
      border-color: var(--accent);
    }

    .btn-primary:hover {
      background: var(--accent-hover);
    }

    .btn-icon {
      padding: 10px;
    }

    .input, select.input {
      width: 100%;
      padding: 14px 18px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      font-size: 1rem;
      outline: none;
      transition: border-color var(--transition);
    }

    .input:focus {
      border-color: var(--accent);
    }

    /* –°—Ç—Ä—ñ—á–∫–∞ –ø–æ—Å—Ç—ñ–≤ */
    .feed {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .post {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
    }

    .post-header {
      display: flex;
      gap: 12px;
      margin-bottom: 14px;
    }

    .post-author {
      font-weight: 700;
      cursor: pointer;
    }

    .post-author:hover {
      text-decoration: underline;
    }

    .post-meta {
      color: var(--text-tertiary);
      font-size: 0.9rem;
    }

    .post-content {
      margin-bottom: 14px;
      white-space: pre-wrap;
    }

    .post-media {
      width: 100%;
      border-radius: var(--radius-md);
      margin: 10px 0;
      cursor: pointer;
    }

    audio.post-media {
      width: 100%;
    }

    .post-footer {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .post-footer button {
      background: none;
      border: none;
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text-secondary);
      font-weight: 500;
      cursor: pointer;
      transition: color var(--transition);
    }

    .post-footer button:hover {
      color: var(--accent);
    }

    .post-footer button.liked {
      color: #ff3040;
    }

    .post-footer button.saved {
      color: #f5a623;
    }

    /* –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ */
    .comments-section {
      margin-top: 16px;
      border-top: 1px solid var(--border);
      padding-top: 16px;
    }

    .comment {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }

    .comment-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .comment-content {
      flex: 1;
      background: var(--surface);
      padding: 8px 12px;
      border-radius: var(--radius-md);
    }

    .comment-author {
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-block;
      margin-right: 8px;
    }

    .comment-text {
      font-size: 0.95rem;
      word-break: break-word;
    }

    .comment-time {
      font-size: 0.75rem;
      color: var(--text-tertiary);
      margin-top: 4px;
    }

    .comment-form {
      display: flex;
      gap: 8px;
      margin-top: 16px;
      align-items: center;
    }

    .comment-input {
      flex: 1;
      padding: 10px 14px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
    }

    /* –ï–º–æ–¥–∂—ñ-–ø—ñ–∫–µ—Ä */
    .emoji-picker-container {
      position: relative;
      display: inline-block;
    }

    .emoji-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 4px 8px;
      color: var(--text-secondary);
    }

    .emoji-picker {
      position: absolute;
      bottom: 100%;
      right: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 8px;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 4px;
      z-index: 10;
      box-shadow: var(--shadow-lg);
      max-width: 200px;
      max-height: 150px;
      overflow-y: auto;
    }

    .emoji-picker span {
      font-size: 1.5rem;
      cursor: pointer;
      text-align: center;
      padding: 4px;
      border-radius: var(--radius-sm);
      transition: background 0.1s;
    }

    .emoji-picker span:hover {
      background: var(--surface);
    }

    /* –ß–∞—Ç–∏ */
    .chat-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .chat-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px;
      border-radius: var(--radius-md);
      background: var(--card);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: background var(--transition);
    }

    .chat-item:hover {
      background: var(--surface);
    }

    .chat-item.unread {
      border-left: 3px solid var(--accent);
    }

    .chat-info {
      flex: 1;
    }

    .chat-name {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chat-last {
      color: var(--text-tertiary);
      font-size: 0.9rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .chat-time {
      color: var(--text-tertiary);
      font-size: 0.8rem;
    }

    .chat-badge {
      background: var(--accent);
      color: var(--bg);
      border-radius: 50%;
      min-width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 600;
    }

    /* –í—ñ–∫–Ω–æ —á–∞—Ç—É */
    .chat-window {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .chat-header {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .chat-messages {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .message {
      max-width: 70%;
      padding: 10px 14px;
      border-radius: 20px;
      word-break: break-word;
    }

    .message.sent {
      background: var(--accent);
      color: var(--bg);
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .message.received {
      background: var(--surface);
      color: var(--text-primary);
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .message.media {
      padding: 5px;
    }
    .message img, .message video, .message audio {
      max-width: 100%;
      border-radius: var(--radius-md);
      margin-top: 5px;
    }

    .typing-indicator {
      color: var(--text-tertiary);
      font-size: 0.9rem;
      padding: 4px 8px;
      font-style: italic;
    }

    .chat-input-area {
      display: flex;
      padding: 12px;
      border-top: 1px solid var(--border);
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .chat-input-area input[type="text"] {
      flex: 1;
      min-width: 150px;
    }

    .chat-input-area input[type="file"] {
      display: none;
    }

    .chat-input-area .file-label {
      cursor: pointer;
      padding: 8px 12px;
      background: var(--surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      font-size: 1.2rem;
    }

    /* –ì—Ä—É–ø–∏ —Ç–∞ –∫–∞–Ω–∞–ª–∏ */
    .group-list, .channel-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .group-item, .channel-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: background var(--transition);
    }

    .group-item:hover, .channel-item:hover {
      background: var(--surface);
    }

    .group-avatar, .channel-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--surface);
      background-size: cover;
    }

    .group-info, .channel-info {
      flex: 1;
    }

    .group-name, .channel-name {
      font-weight: 700;
    }

    .group-meta, .channel-meta {
      color: var(--text-tertiary);
      font-size: 0.9rem;
    }

    /* –ü—Ä–æ—Ñ—ñ–ª—å */
    .profile-header {
      display: flex;
      gap: 24px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .profile-stats {
      display: flex;
      gap: 24px;
      margin: 16px 0;
    }

    .profile-tabs {
      display: flex;
      gap: 8px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
      margin-bottom: 20px;
    }

    .profile-tab {
      padding: 8px 16px;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      color: var(--text-secondary);
      transition: all var(--transition);
    }

    .profile-tab.active {
      background: var(--accent);
      color: var(--bg);
    }

    /* –ú–æ–¥–∞–ª–∫–∏ */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 24px;
      max-width: 480px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .modal-close {
      font-size: 2rem;
      line-height: 1;
      cursor: pointer;
    }

    /* Toast */
    #toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: var(--bg);
      padding: 12px 24px;
      border-radius: 40px;
      font-weight: 500;
      box-shadow: var(--shadow-lg);
      z-index: 3000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }
    #toast.show {
      opacity: 1;
    }

    /* –°–∫–µ–ª–µ—Ç–æ–Ω */
    .skeleton {
      background: linear-gradient(90deg, var(--surface) 25%, var(--card) 50%, var(--surface) 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
      border-radius: var(--radius-md);
    }
    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Language selector */
    .language-select {
      margin: 18px 0;
    }
  </style>
</head>
<body>
<div class="app">
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo">FANTASYAS</div>
    </div>
    <nav class="nav">
      <div class="nav-item active" data-section="home">
        <svg class="icon" viewBox="0 0 24 24"><path d="M3 10l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        <span data-i18n="nav.home">–ì–æ–ª–æ–≤–Ω–∞</span>
      </div>
      <div class="nav-item" data-section="search">
        <svg class="icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <span data-i18n="nav.search">–ü–æ—à—É–∫</span>
      </div>
      <div class="nav-item" data-section="profile">
        <svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        <span data-i18n="nav.profile">–ü—Ä–æ—Ñ—ñ–ª—å</span>
      </div>
      <div class="nav-item" data-section="chats">
        <svg class="icon" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        <span data-i18n="nav.chats">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
        <span class="badge" id="unreadBadge" style="display:none;">0</span>
      </div>
      <div class="nav-item" data-section="groups">
        <svg class="icon" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        <span data-i18n="nav.groups">–ì—Ä—É–ø–∏</span>
      </div>
      <div class="nav-item" data-section="channels">
        <svg class="icon" viewBox="0 0 24 24"><path d="M4 4l16 8-16 8V4z"/></svg>
        <span data-i18n="nav.channels">–ö–∞–Ω–∞–ª–∏</span>
      </div>
      <div class="nav-item" data-section="settings">
        <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.07.07A10 10 0 0 0 12 17.66a10 10 0 0 0 6.26-2.26z"/></svg>
        <span data-i18n="nav.settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</span>
      </div>
    </nav>
  </aside>

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main">
    <div class="top-bar">
      <div class="menu-toggle" id="menuToggle">
        <span></span><span></span><span></span>
      </div>
      <div class="top-bar-title" id="pageTitle" data-i18n="pages.home">–ì–æ–ª–æ–≤–Ω–∞</div>
    </div>

    <div class="content" id="content">
      <!-- –°–µ–∫—Ü—ñ—ó -->
      <div id="home" class="section active">
        <div class="card" id="authBox">
          <div id="loginForm">
            <input type="text" id="loginNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)" data-i18n-placeholder="login.nickname" autocomplete="off"/>
            <input type="password" id="loginPassword" class="input" placeholder="–ü–∞—Ä–æ–ª—å" data-i18n-placeholder="login.password"/>
            <button class="btn btn-primary" id="loginBtn" style="width:100%; margin-top:12px;" data-i18n="login.loginBtn">–£–≤—ñ–π—Ç–∏</button>
            <div style="display:flex; gap:10px; margin-top:15px;">
              <button class="btn" id="googleLoginBtn" style="flex:1;">Google</button>
              <button class="btn" id="appleLoginBtn" style="flex:1;">Apple</button>
            </div>
            <p style="margin-top:18px;"><span data-i18n="login.noAccount">–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç–∞?</span> <span id="toRegister" style="color:var(--accent);cursor:pointer;" data-i18n="login.registerLink">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</span></p>
            <p><a href="#" id="forgotPassword" style="color:var(--accent);" data-i18n="login.forgotPassword">–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?</a></p>
          </div>
          <div id="registerForm" style="display:none;">
            <input type="text" id="registerNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)" data-i18n-placeholder="register.nickname"/>
            <input type="password" id="registerPassword" class="input" placeholder="–ü–∞—Ä–æ–ª—å" data-i18n-placeholder="register.password"/>
            <button class="btn btn-primary" id="registerBtn" style="width:100%; margin-top:12px;" data-i18n="register.registerBtn">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <p style="margin-top:18px;"><span data-i18n="register.haveAccount">–í–∂–µ —î –∞–∫–∞—É–Ω—Ç?</span> <span id="toLogin" style="color:var(--accent);cursor:pointer;" data-i18n="register.loginLink">–£–≤—ñ–π—Ç–∏</span></p>
          </div>
        </div>

        <div class="card" id="newPostBox" style="display:none;">
          <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 10px;">
            <textarea id="postText" class="input" placeholder="–©–æ –Ω–æ–≤–æ–≥–æ?" rows="3" style="flex:1;" data-i18n-placeholder="post.placeholder"></textarea>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="postEmojiBtn">üòä</button>
              <div class="emoji-picker" id="postEmojiPicker" style="display: none;"></div>
            </div>
          </div>
          <input type="file" id="postMedia" accept="image/*,video/*,audio/*" style="margin:10px 0;"/>
          <button class="btn btn-primary" id="addPost" data-i18n="post.publish">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
        </div>

        <div class="feed-header" style="display:flex; gap:10px; margin-bottom:20px;">
          <button class="btn" id="feedNewBtn" data-i18n="feed.new">–ù–æ–≤—ñ</button>
          <button class="btn" id="feedPopularBtn" data-i18n="feed.popular">–ü–æ–ø—É–ª—è—Ä–Ω—ñ</button>
        </div>

        <div class="feed" id="feed"></div>
        <div class="feed-end-sentinel" id="feedSentinel"></div>
        <div id="skeletonContainer" style="display:none;">
          <div class="skeleton" style="height:200px; margin-bottom:20px;"></div>
          <div class="skeleton" style="height:200px;"></div>
        </div>
      </div>

      <div id="search" class="section">
        <input type="text" id="searchInput" class="input" placeholder="–ü–æ—à—É–∫ –∑–∞ @id –∞–±–æ —ñ–º'—è–º..." data-i18n-placeholder="search.placeholder"/>
        <div class="user-list" id="userList" style="margin-top:20px;"></div>
      </div>

      <div id="profile" class="section">
        <div class="profile-header" id="profileHeader"></div>
        <div class="profile-tabs" id="profileTabs"></div>
        <div class="feed" id="profileFeed"></div>
      </div>

      <div id="chats" class="section">
        <div class="chat-list" id="chatList"></div>
        <div class="chat-window" id="chatWindow" style="display:none;">
          <div class="chat-header">
            <div class="avatar" id="chatAvatar"></div>
            <div>
              <div id="chatName"></div>
              <div class="chat-meta" id="chatUserId"></div>
            </div>
            <span id="onlineIndicator" class="online-indicator" style="display:none;"></span>
          </div>
          <div class="chat-messages" id="chatMessages"></div>
          <div class="typing-indicator" id="typingIndicator" style="display:none;" data-i18n="chat.typing">–¥—Ä—É–∫—É—î...</div>
          <div class="chat-input-area">
            <input type="text" id="chatText" class="input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." data-i18n-placeholder="chat.placeholder"/>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="chatEmojiBtn">üòä</button>
              <div class="emoji-picker" id="chatEmojiPicker" style="display: none;"></div>
            </div>
            <label for="chatMedia" class="file-label">üìé</label>
            <input type="file" id="chatMedia" accept="image/*,video/*,audio/*"/>
            <button class="btn btn-primary btn-icon" id="sendMessage">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </div>
        </div>
      </div>

      <div id="groups" class="section">
        <button class="btn btn-primary" id="createGroupBtn" style="margin-bottom:20px;" data-i18n="groups.create">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          <span data-i18n="groups.createText">–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É</span>
        </button>
        <div class="group-list" id="groupList"></div>
        <div class="chat-window" id="groupChatWindow" style="display:none;">
          <div class="chat-header">
            <div class="avatar" id="groupChatAvatar"></div>
            <div>
              <div id="groupChatName"></div>
              <div class="chat-meta" id="groupChatMeta"></div>
            </div>
            <button class="btn" id="groupMembersBtn" data-i18n="groups.members">–£—á–∞—Å–Ω–∏–∫–∏</button>
          </div>
          <div class="chat-messages" id="groupChatMessages"></div>
          <div class="chat-input-area">
            <input type="text" id="groupChatText" class="input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." data-i18n-placeholder="chat.placeholder"/>
            <div class="emoji-picker-container">
              <button class="emoji-button" id="groupEmojiBtn">üòä</button>
              <div class="emoji-picker" id="groupEmojiPicker" style="display: none;"></div>
            </div>
            <label for="groupChatMedia" class="file-label">üìé</label>
            <input type="file" id="groupChatMedia" accept="image/*,video/*,audio/*"/>
            <button class="btn btn-primary btn-icon" id="sendGroupMessage">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </div>
        </div>
      </div>

      <div id="channels" class="section">
        <button class="btn btn-primary" id="createChannelBtn" style="margin-bottom:20px;" data-i18n="channels.create">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          <span data-i18n="channels.createText">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª</span>
        </button>
        <div class="channel-list" id="channelList"></div>
        <div id="channelView" style="display:none;">
          <div class="card" id="channelHeader"></div>
          <div class="feed" id="channelFeed"></div>
          <div id="newChannelPostBox" style="display:none; margin-top:20px;">
            <div style="display: flex; gap: 8px; align-items: center;">
              <textarea id="channelPostText" class="input" placeholder="–ù–æ–≤–∏–π –ø–æ—Å—Ç..." rows="3" style="flex:1;" data-i18n-placeholder="channel.postPlaceholder"></textarea>
              <div class="emoji-picker-container">
                <button class="emoji-button" id="channelEmojiBtn">üòä</button>
                <div class="emoji-picker" id="channelEmojiPicker" style="display: none;"></div>
              </div>
            </div>
            <input type="file" id="channelPostMedia" accept="image/*,video/*,audio/*" style="margin:10px 0;"/>
            <button class="btn btn-primary" id="addChannelPost" data-i18n="channel.publish">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </div>
      </div>

      <div id="settings" class="section card">
        <h2 data-i18n="settings.title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
        <button class="btn" id="toggleTheme" style="margin:18px 0;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
          <span data-i18n="settings.theme">–¢–µ–º–∞</span>
        </button>
        
        <div class="language-select">
          <label for="languageSelect" data-i18n="settings.language">–ú–æ–≤–∞:</label>
          <select id="languageSelect" class="input">
            <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="pl">Polski</option>
            <option value="de">Deutsch</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="be">–ë–µ–ª–∞—Ä—É—Å–∫–∞—è</option>
            <option value="cs">ƒåe≈°tina</option>
            <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
          </select>
        </div>

        <button class="btn" id="privacyPolicyBtn" style="margin:18px 0;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span data-i18n="settings.privacy">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</span>
        </button>
        <button class="btn" id="logoutBtn" data-i18n="settings.logout">–í–∏–π—Ç–∏</button>
      </div>
    </div>
  </main>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∏ -->
<div class="modal" id="editProfileModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="profile.editTitle">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</h3>
      <span class="modal-close" id="closeModal">&times;</span>
    </div>
    <input type="text" id="editNickname" class="input" placeholder="–ü—Å–µ–≤–¥–æ–Ω—ñ–º" data-i18n-placeholder="profile.nickname"/>
    <textarea id="editBio" class="input" placeholder="–ü—Ä–æ —Å–µ–±–µ" rows="4" style="margin:14px 0;" data-i18n-placeholder="profile.bio"></textarea>
    <button class="btn btn-primary" id="saveProfileEdit" data-i18n="profile.save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
  </div>
</div>

<div class="modal" id="createGroupModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="groups.createTitle">–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É</h3>
      <span class="modal-close" id="closeGroupModal">&times;</span>
    </div>
    <input type="text" id="groupName" class="input" placeholder="–ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏" data-i18n-placeholder="groups.name"/>
    <textarea id="groupDesc" class="input" placeholder="–û–ø–∏—Å" rows="3" style="margin:14px 0;" data-i18n-placeholder="groups.desc"></textarea>
    <input type="file" id="groupAvatar" accept="image/*"/>
    <button class="btn btn-primary" id="saveGroup" data-i18n="groups.createBtn">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
  </div>
</div>

<div class="modal" id="createChannelModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="channels.createTitle">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª</h3>
      <span class="modal-close" id="closeChannelModal">&times;</span>
    </div>
    <input type="text" id="channelName" class="input" placeholder="–ù–∞–∑–≤–∞ –∫–∞–Ω–∞–ª—É" data-i18n-placeholder="channels.name"/>
    <textarea id="channelDesc" class="input" placeholder="–û–ø–∏—Å" rows="3" style="margin:14px 0;" data-i18n-placeholder="channels.desc"></textarea>
    <input type="file" id="channelAvatar" accept="image/*"/>
    <button class="btn btn-primary" id="saveChannel" data-i18n="channels.createBtn">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
  </div>
</div>

<div class="modal" id="groupMembersModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="groups.membersTitle">–£—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø–∏</h3>
      <span class="modal-close" id="closeGroupMembers">&times;</span>
    </div>
    <div id="membersList"></div>
    <div style="margin-top:20px;">
      <input type="text" id="addMemberInput" class="input" placeholder="ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, @username)" data-i18n-placeholder="groups.addMember"/>
      <button class="btn btn-primary" id="addMemberBtn" data-i18n="groups.addBtn">–î–æ–¥–∞—Ç–∏</button>
    </div>
  </div>
</div>

<!-- Privacy Policy Modal -->
<div class="modal" id="privacyPolicyModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 data-i18n="privacy.title">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</h3>
      <span class="modal-close" id="closePrivacyModal">&times;</span>
    </div>
    <div style="max-height: 60vh; overflow-y: auto;" data-i18n="privacy.content">
      <p>–í–∞—à–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –≤–∞–∂–ª–∏–≤–∞ –¥–ª—è –Ω–∞—Å. –¶—è –ø–æ–ª—ñ—Ç–∏–∫–∞ –ø–æ—è—Å–Ω—é—î, —è–∫—ñ –¥–∞–Ω—ñ –º–∏ –∑–±–∏—Ä–∞—î–º–æ, —è–∫ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç–∞ –∑–∞—Ö–∏—â–∞—î–º–æ.</p>
      <h4>1. –Ø–∫—ñ –¥–∞–Ω—ñ –º–∏ –∑–±–∏—Ä–∞—î–º–æ</h4>
      <p>–ú–∏ –∑–±–∏—Ä–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, —è–∫—É –≤–∏ –Ω–∞–¥–∞—î—Ç–µ –ø—ñ–¥ —á–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (–ø—Å–µ–≤–¥–æ–Ω—ñ–º, email), –∞ —Ç–∞–∫–æ–∂ –¥–∞–Ω—ñ –ø—Ä–æ –≤–∞—à—ñ –¥—ñ—ó –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ (–ø–æ—Å—Ç–∏, –ª–∞–π–∫–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è).</p>
      <h4>2. –Ø–∫ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¥–∞–Ω—ñ</h4>
      <p>–í–∞—à—ñ –¥–∞–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤—ñ—Å—É, –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É. –ú–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—î–º–æ –≤–∞—à—ñ –¥–∞–Ω—ñ —Ç—Ä–µ—Ç—ñ–º –æ—Å–æ–±–∞–º –±–µ–∑ –≤–∞—à–æ—ó –∑–≥–æ–¥–∏.</p>
      <h4>3. –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö</h4>
      <p>–ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—É—á–∞—Å–Ω—ñ –º–µ—Ç–æ–¥–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –±–µ–∑–ø–µ–∫–∏ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤–∞—à–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.</p>
      <h4>4. –í–∞—à—ñ –ø—Ä–∞–≤–∞</h4>
      <p>–í–∏ –º–æ–∂–µ—Ç–µ –≤ –±—É–¥—å-—è–∫–∏–π —á–∞—Å –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç –∞–±–æ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –Ω–∞—Å —ñ–∑ –∑–∞–ø–∏—Ç–æ–º –ø—Ä–æ –Ω–∞–¥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.</p>
      <p>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: –ª—é—Ç–∏–π 2026</p>
    </div>
  </div>
</div>

<div id="toast"></div>

<script type="module">
  // ================= Firebase —ñ–º–ø–æ—Ä—Ç–∏ =================
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, OAuthProvider, signInWithPopup, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, updateDoc, collection, addDoc, query, where, onSnapshot, orderBy, serverTimestamp, arrayUnion, arrayRemove, deleteDoc, getDocs, increment, limit, startAfter, writeBatch } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-storage.js";

  // ================= –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è =================
  const firebaseConfig = {
    apiKey: "AIzaSyDRzC-QDE0-UXd-XL0i3iqayFiKcc6wmvc",
    authDomain: "fantasyasapp.firebaseapp.com",
    projectId: "fantasyasapp",
    storageBucket: "fantasyasapp.appspot.com",
    messagingSenderId: "721763921060",
    appId: "1:721763921060:web:3d61044ea2424e8176ca31"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // ================= –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ =================
  let currentUser = null;
  let currentChatPartner = null;
  let currentGroup = null;
  let currentChannel = null;
  
  // unsubscribe functions
  let unsubscribeFeed = null;
  let unsubscribeChat = null;
  let unsubscribeChatList = null;
  let unsubscribeGroup = null;
  let unsubscribeChannel = null;
  let unsubscribeGroups = null;
  let unsubscribeChannels = null;
  let unsubscribeTyping = null;
  let lastOnlineInterval = null;

  let unreadCount = 0;
  let currentFeedType = 'new';
  let lastVisible = null;
  let loading = false;
  let hasMore = true;

  // ================= i18n =================
  const translations = {
    uk: {
      'nav.home': '–ì–æ–ª–æ–≤–Ω–∞',
      'nav.search': '–ü–æ—à—É–∫',
      'nav.profile': '–ü—Ä–æ—Ñ—ñ–ª—å',
      'nav.chats': '–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è',
      'nav.groups': '–ì—Ä—É–ø–∏',
      'nav.channels': '–ö–∞–Ω–∞–ª–∏',
      'nav.settings': '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
      'pages.home': '–ì–æ–ª–æ–≤–Ω–∞',
      'login.nickname': '–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)',
      'login.password': '–ü–∞—Ä–æ–ª—å',
      'login.loginBtn': '–£–≤—ñ–π—Ç–∏',
      'login.noAccount': '–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç–∞?',
      'login.registerLink': '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è',
      'login.forgotPassword': '–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?',
      'register.nickname': '–ü—Å–µ–≤–¥–æ–Ω—ñ–º (–±–µ–∑ @)',
      'register.password': '–ü–∞—Ä–æ–ª—å',
      'register.registerBtn': '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è',
      'register.haveAccount': '–í–∂–µ —î –∞–∫–∞—É–Ω—Ç?',
      'register.loginLink': '–£–≤—ñ–π—Ç–∏',
      'post.placeholder': '–©–æ –Ω–æ–≤–æ–≥–æ?',
      'post.publish': '–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏',
      'feed.new': '–ù–æ–≤—ñ',
      'feed.popular': '–ü–æ–ø—É–ª—è—Ä–Ω—ñ',
      'search.placeholder': '–ü–æ—à—É–∫ –∑–∞ @id –∞–±–æ —ñ–º\'—è–º...',
      'chat.typing': '–¥—Ä—É–∫—É—î...',
      'chat.placeholder': '–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...',
      'groups.create': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É',
      'groups.createText': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É',
      'groups.members': '–£—á–∞—Å–Ω–∏–∫–∏',
      'channels.create': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª',
      'channels.createText': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª',
      'channel.postPlaceholder': '–ù–æ–≤–∏–π –ø–æ—Å—Ç...',
      'channel.publish': '–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏',
      'settings.title': '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è',
      'settings.theme': '–¢–µ–º–∞',
      'settings.language': '–ú–æ–≤–∞:',
      'settings.privacy': '–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ',
      'settings.logout': '–í–∏–π—Ç–∏',
      'profile.editTitle': '–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å',
      'profile.nickname': '–ü—Å–µ–≤–¥–æ–Ω—ñ–º',
      'profile.bio': '–ü—Ä–æ —Å–µ–±–µ',
      'profile.save': '–ó–±–µ—Ä–µ–≥—Ç–∏',
      'groups.createTitle': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É',
      'groups.name': '–ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏',
      'groups.desc': '–û–ø–∏—Å',
      'groups.createBtn': '–°—Ç–≤–æ—Ä–∏—Ç–∏',
      'channels.createTitle': '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª',
      'channels.name': '–ù–∞–∑–≤–∞ –∫–∞–Ω–∞–ª—É',
      'channels.desc': '–û–ø–∏—Å',
      'channels.createBtn': '–°—Ç–≤–æ—Ä–∏—Ç–∏',
      'groups.membersTitle': '–£—á–∞—Å–Ω–∏–∫–∏ –≥—Ä—É–ø–∏',
      'groups.addMember': 'ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, @username)',
      'groups.addBtn': '–î–æ–¥–∞—Ç–∏',
      'privacy.title': '–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ',
      'privacy.content': '<p>–í–∞—à–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –≤–∞–∂–ª–∏–≤–∞ –¥–ª—è –Ω–∞—Å. –¶—è –ø–æ–ª—ñ—Ç–∏–∫–∞ –ø–æ—è—Å–Ω—é—î, —è–∫—ñ –¥–∞–Ω—ñ –º–∏ –∑–±–∏—Ä–∞—î–º–æ, —è–∫ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç–∞ –∑–∞—Ö–∏—â–∞—î–º–æ.</p><h4>1. –Ø–∫—ñ –¥–∞–Ω—ñ –º–∏ –∑–±–∏—Ä–∞—î–º–æ</h4><p>–ú–∏ –∑–±–∏—Ä–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, —è–∫—É –≤–∏ –Ω–∞–¥–∞—î—Ç–µ –ø—ñ–¥ —á–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (–ø—Å–µ–≤–¥–æ–Ω—ñ–º, email), –∞ —Ç–∞–∫–æ–∂ –¥–∞–Ω—ñ –ø—Ä–æ –≤–∞—à—ñ –¥—ñ—ó –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ (–ø–æ—Å—Ç–∏, –ª–∞–π–∫–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è).</p><h4>2. –Ø–∫ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¥–∞–Ω—ñ</h4><p>–í–∞—à—ñ –¥–∞–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤—ñ—Å—É, –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É. –ú–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—î–º–æ –≤–∞—à—ñ –¥–∞–Ω—ñ —Ç—Ä–µ—Ç—ñ–º –æ—Å–æ–±–∞–º –±–µ–∑ –≤–∞—à–æ—ó –∑–≥–æ–¥–∏.</p><h4>3. –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö</h4><p>–ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—É—á–∞—Å–Ω—ñ –º–µ—Ç–æ–¥–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –±–µ–∑–ø–µ–∫–∏ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤–∞—à–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.</p><h4>4. –í–∞—à—ñ –ø—Ä–∞–≤–∞</h4><p>–í–∏ –º–æ–∂–µ—Ç–µ –≤ –±—É–¥—å-—è–∫–∏–π —á–∞—Å –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç –∞–±–æ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –Ω–∞—Å —ñ–∑ –∑–∞–ø–∏—Ç–æ–º –ø—Ä–æ –Ω–∞–¥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.</p><p>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: –ª—é—Ç–∏–π 2026</p>'
    },
    en: {
      'nav.home': 'Home',
      'nav.search': 'Search',
      'nav.profile': 'Profile',
      'nav.chats': 'Messages',
      'nav.groups': 'Groups',
      'nav.channels': 'Channels',
      'nav.settings': 'Settings',
      'pages.home': 'Home',
      'login.nickname': 'Nickname (without @)',
      'login.password': 'Password',
      'login.loginBtn': 'Login',
      'login.noAccount': 'No account?',
      'login.registerLink': 'Register',
      'login.forgotPassword': 'Forgot password?',
      'register.nickname': 'Nickname (without @)',
      'register.password': 'Password',
      'register.registerBtn': 'Register',
      'register.haveAccount': 'Already have an account?',
      'register.loginLink': 'Login',
      'post.placeholder': 'What\'s new?',
      'post.publish': 'Publish',
      'feed.new': 'New',
      'feed.popular': 'Popular',
      'search.placeholder': 'Search by @id or name...',
      'chat.typing': 'typing...',
      'chat.placeholder': 'Write a message...',
      'groups.create': 'Create group',
      'groups.createText': 'Create group',
      'groups.members': 'Members',
      'channels.create': 'Create channel',
      'channels.createText': 'Create channel',
      'channel.postPlaceholder': 'New post...',
      'channel.publish': 'Publish',
      'settings.title': 'Settings',
      'settings.theme': 'Theme',
      'settings.language': 'Language:',
      'settings.privacy': 'Privacy Policy',
      'settings.logout': 'Logout',
      'profile.editTitle': 'Edit Profile',
      'profile.nickname': 'Nickname',
      'profile.bio': 'Bio',
      'profile.save': 'Save',
      'groups.createTitle': 'Create Group',
      'groups.name': 'Group name',
      'groups.desc': 'Description',
      'groups.createBtn': 'Create',
      'channels.createTitle': 'Create Channel',
      'channels.name': 'Channel name',
      'channels.desc': 'Description',
      'channels.createBtn': 'Create',
      'groups.membersTitle': 'Group Members',
      'groups.addMember': 'User ID (e.g., @username)',
      'groups.addBtn': 'Add',
      'privacy.title': 'Privacy Policy',
      'privacy.content': '<p>Your privacy is important to us. This policy explains what data we collect, how we use it, and how we protect it.</p><h4>1. What data we collect</h4><p>We collect information you provide during registration (nickname, email), as well as data about your actions on the platform (posts, likes, messages).</p><h4>2. How we use data</h4><p>Your data is used to provide the service, personalize content, and improve functionality. We do not share your data with third parties without your consent.</p><h4>3. Data protection</h4><p>We use modern encryption and security methods to protect your information.</p><h4>4. Your rights</h4><p>You can delete your account at any time or contact us with a request for information.</p><p>Last updated: February 2026</p>'
    },
    es: {
      'nav.home': 'Inicio',
      'nav.search': 'Buscar',
      'nav.profile': 'Perfil',
      'nav.chats': 'Mensajes',
      'nav.groups': 'Grupos',
      'nav.channels': 'Canales',
      'nav.settings': 'Ajustes',
      'pages.home': 'Inicio',
      'login.nickname': 'Apodo (sin @)',
      'login.password': 'Contrase√±a',
      'login.loginBtn': 'Iniciar sesi√≥n',
      'login.noAccount': '¬øNo tienes cuenta?',
      'login.registerLink': 'Registrarse',
      'login.forgotPassword': '¬øOlvidaste tu contrase√±a?',
      'register.nickname': 'Apodo (sin @)',
      'register.password': 'Contrase√±a',
      'register.registerBtn': 'Registrarse',
      'register.haveAccount': '¬øYa tienes cuenta?',
      'register.loginLink': 'Iniciar sesi√≥n',
      'post.placeholder': '¬øQu√© hay de nuevo?',
      'post.publish': 'Publicar',
      'feed.new': 'Nuevos',
      'feed.popular': 'Populares',
      'search.placeholder': 'Buscar por @id o nombre...',
      'chat.typing': 'escribiendo...',
      'chat.placeholder': 'Escribe un mensaje...',
      'groups.create': 'Crear grupo',
      'groups.createText': 'Crear grupo',
      'groups.members': 'Miembros',
      'channels.create': 'Crear canal',
      'channels.createText': 'Crear canal',
      'channel.postPlaceholder': 'Nueva publicaci√≥n...',
      'channel.publish': 'Publicar',
      'settings.title': 'Ajustes',
      'settings.theme': 'Tema',
      'settings.language': 'Idioma:',
      'settings.privacy': 'Pol√≠tica de privacidad',
      'settings.logout': 'Cerrar sesi√≥n',
      'profile.editTitle': 'Editar perfil',
      'profile.nickname': 'Apodo',
      'profile.bio': 'Biograf√≠a',
      'profile.save': 'Guardar',
      'groups.createTitle': 'Crear grupo',
      'groups.name': 'Nombre del grupo',
      'groups.desc': 'Descripci√≥n',
      'groups.createBtn': 'Crear',
      'channels.createTitle': 'Crear canal',
      'channels.name': 'Nombre del canal',
      'channels.desc': 'Descripci√≥n',
      'channels.createBtn': 'Crear',
      'groups.membersTitle': 'Miembros del grupo',
      'groups.addMember': 'ID de usuario (ej., @usuario)',
      'groups.addBtn': 'Agregar',
      'privacy.title': 'Pol√≠tica de privacidad',
      'privacy.content': '<p>Tu privacidad es importante para nosotros. Esta pol√≠tica explica qu√© datos recopilamos, c√≥mo los usamos y c√≥mo los protegemos.</p><h4>1. Qu√© datos recopilamos</h4><p>Recopilamos informaci√≥n que proporcionas durante el registro (apodo, correo electr√≥nico), as√≠ como datos sobre tus acciones en la plataforma (publicaciones, me gusta, mensajes).</p><h4>2. C√≥mo usamos los datos</h4><p>Tus datos se utilizan para proporcionar el servicio, personalizar el contenido y mejorar la funcionalidad. No compartimos tus datos con terceros sin tu consentimiento.</p><h4>3. Protecci√≥n de datos</h4><p>Usamos m√©todos modernos de cifrado y seguridad para proteger tu informaci√≥n.</p><h4>4. Tus derechos</h4><p>Puedes eliminar tu cuenta en cualquier momento o contactarnos para solicitar informaci√≥n.</p><p>√öltima actualizaci√≥n: febrero de 2026</p>'
    },
    pl: {
      'nav.home': 'Strona g≈Ç√≥wna',
      'nav.search': 'Szukaj',
      'nav.profile': 'Profil',
      'nav.chats': 'Wiadomo≈õci',
      'nav.groups': 'Grupy',
      'nav.channels': 'Kana≈Çy',
      'nav.settings': 'Ustawienia',
      'pages.home': 'Strona g≈Ç√≥wna',
      'login.nickname': 'Pseudonim (bez @)',
      'login.password': 'Has≈Ço',
      'login.loginBtn': 'Zaloguj siƒô',
      'login.noAccount': 'Nie masz konta?',
      'login.registerLink': 'Zarejestruj siƒô',
      'login.forgotPassword': 'Zapomnia≈Çe≈õ has≈Ça?',
      'register.nickname': 'Pseudonim (bez @)',
      'register.password': 'Has≈Ço',
      'register.registerBtn': 'Zarejestruj siƒô',
      'register.haveAccount': 'Masz ju≈º konto?',
      'register.loginLink': 'Zaloguj siƒô',
      'post.placeholder': 'Co nowego?',
      'post.publish': 'Opublikuj',
      'feed.new': 'Nowe',
      'feed.popular': 'Popularne',
      'search.placeholder': 'Szukaj po @id lub nazwie...',
      'chat.typing': 'pisze...',
      'chat.placeholder': 'Napisz wiadomo≈õƒá...',
      'groups.create': 'Utw√≥rz grupƒô',
      'groups.createText': 'Utw√≥rz grupƒô',
      'groups.members': 'Cz≈Çonkowie',
      'channels.create': 'Utw√≥rz kana≈Ç',
      'channels.createText': 'Utw√≥rz kana≈Ç',
      'channel.postPlaceholder': 'Nowy post...',
      'channel.publish': 'Opublikuj',
      'settings.title': 'Ustawienia',
      'settings.theme': 'Motyw',
      'settings.language': 'Jƒôzyk:',
      'settings.privacy': 'Polityka prywatno≈õci',
      'settings.logout': 'Wyloguj siƒô',
      'profile.editTitle': 'Edytuj profil',
      'profile.nickname': 'Pseudonim',
      'profile.bio': 'Bio',
      'profile.save': 'Zapisz',
      'groups.createTitle': 'Utw√≥rz grupƒô',
      'groups.name': 'Nazwa grupy',
      'groups.desc': 'Opis',
      'groups.createBtn': 'Utw√≥rz',
      'channels.createTitle': 'Utw√≥rz kana≈Ç',
      'channels.name': 'Nazwa kana≈Çu',
      'channels.desc': 'Opis',
      'channels.createBtn': 'Utw√≥rz',
      'groups.membersTitle': 'Cz≈Çonkowie grupy',
      'groups.addMember': 'ID u≈ºytkownika (np. @nazwa)',
      'groups.addBtn': 'Dodaj',
      'privacy.title': 'Polityka prywatno≈õci',
      'privacy.content': '<p>Twoja prywatno≈õƒá jest dla nas wa≈ºna. Niniejsza polityka wyja≈õnia, jakie dane zbieramy, jak je wykorzystujemy i jak je chronimy.</p><h4>1. Jakie dane zbieramy</h4><p>Zbieramy informacje podawane podczas rejestracji (pseudonim, e-mail) oraz dane dotyczƒÖce Twoich dzia≈Ça≈Ñ na platformie (posty, polubienia, wiadomo≈õci).</p><h4>2. Jak wykorzystujemy dane</h4><p>Twoje dane sƒÖ wykorzystywane do ≈õwiadczenia us≈Çugi, personalizacji tre≈õci i ulepszania funkcjonalno≈õci. Nie udostƒôpniamy Twoich danych osobom trzecim bez Twojej zgody.</p><h4>3. Ochrona danych</h4><p>Stosujemy nowoczesne metody szyfrowania i zabezpiecze≈Ñ, aby chroniƒá Twoje informacje.</p><h4>4. Twoje prawa</h4><p>Mo≈ºesz w ka≈ºdej chwili usunƒÖƒá swoje konto lub skontaktowaƒá siƒô z nami z pro≈õbƒÖ o udostƒôpnienie informacji.</p><p>Ostatnia aktualizacja: luty 2026</p>'
    },
    de: {
      'nav.home': 'Startseite',
      'nav.search': 'Suche',
      'nav.profile': 'Profil',
      'nav.chats': 'Nachrichten',
      'nav.groups': 'Gruppen',
      'nav.channels': 'Kan√§le',
      'nav.settings': 'Einstellungen',
      'pages.home': 'Startseite',
      'login.nickname': 'Spitzname (ohne @)',
      'login.password': 'Passwort',
      'login.loginBtn': 'Anmelden',
      'login.noAccount': 'Kein Konto?',
      'login.registerLink': 'Registrieren',
      'login.forgotPassword': 'Passwort vergessen?',
      'register.nickname': 'Spitzname (ohne @)',
      'register.password': 'Passwort',
      'register.registerBtn': 'Registrieren',
      'register.haveAccount': 'Bereits ein Konto?',
      'register.loginLink': 'Anmelden',
      'post.placeholder': 'Was gibt\'s Neues?',
      'post.publish': 'Ver√∂ffentlichen',
      'feed.new': 'Neu',
      'feed.popular': 'Beliebt',
      'search.placeholder': 'Suche nach @id oder Name...',
      'chat.typing': 'tippt...',
      'chat.placeholder': 'Nachricht schreiben...',
      'groups.create': 'Gruppe erstellen',
      'groups.createText': 'Gruppe erstellen',
      'groups.members': 'Mitglieder',
      'channels.create': 'Kanal erstellen',
      'channels.createText': 'Kanal erstellen',
      'channel.postPlaceholder': 'Neuer Beitrag...',
      'channel.publish': 'Ver√∂ffentlichen',
      'settings.title': 'Einstellungen',
      'settings.theme': 'Design',
      'settings.language': 'Sprache:',
      'settings.privacy': 'Datenschutzrichtlinie',
      'settings.logout': 'Abmelden',
      'profile.editTitle': 'Profil bearbeiten',
      'profile.nickname': 'Spitzname',
      'profile.bio': 'Bio',
      'profile.save': 'Speichern',
      'groups.createTitle': 'Gruppe erstellen',
      'groups.name': 'Gruppenname',
      'groups.desc': 'Beschreibung',
      'groups.createBtn': 'Erstellen',
      'channels.createTitle': 'Kanal erstellen',
      'channels.name': 'Kanalname',
      'channels.desc': 'Beschreibung',
      'channels.createBtn': 'Erstellen',
      'groups.membersTitle': 'Gruppenmitglieder',
      'groups.addMember': 'Benutzer-ID (z.B. @benutzername)',
      'groups.addBtn': 'Hinzuf√ºgen',
      'privacy.title': 'Datenschutzrichtlinie',
      'privacy.content': '<p>Ihre Privatsph√§re ist uns wichtig. Diese Richtlinie erkl√§rt, welche Daten wir sammeln, wie wir sie verwenden und sch√ºtzen.</p><h4>1. Welche Daten wir sammeln</h4><p>Wir sammeln Informationen, die Sie bei der Registrierung angeben (Spitzname, E-Mail), sowie Daten √ºber Ihre Aktivit√§ten auf der Plattform (Beitr√§ge, Likes, Nachrichten).</p><h4>2. Wie wir Daten verwenden</h4><p>Ihre Daten werden verwendet, um den Dienst bereitzustellen, Inhalte zu personalisieren und die Funktionalit√§t zu verbessern. Wir geben Ihre Daten nicht ohne Ihre Zustimmung an Dritte weiter.</p><h4>3. Datenschutz</h4><p>Wir verwenden moderne Verschl√ºsselungs- und Sicherheitsmethoden, um Ihre Informationen zu sch√ºtzen.</p><h4>4. Ihre Rechte</h4><p>Sie k√∂nnen Ihr Konto jederzeit l√∂schen oder uns mit einer Anfrage nach Informationen kontaktieren.</p><p>Letzte Aktualisierung: Februar 2026</p>'
    },
    ru: {
      'nav.home': '–ì–ª–∞–≤–Ω–∞—è',
      'nav.search': '–ü–æ–∏—Å–∫',
      'nav.profile': '–ü—Ä–æ—Ñ–∏–ª—å',
      'nav.chats': '–°–æ–æ–±—â–µ–Ω–∏—è',
      'nav.groups': '–ì—Ä—É–ø–ø—ã',
      'nav.channels': '–ö–∞–Ω–∞–ª—ã',
      'nav.settings': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
      'pages.home': '–ì–ª–∞–≤–Ω–∞—è',
      'login.nickname': '–ü—Å–µ–≤–¥–æ–Ω–∏–º (–±–µ–∑ @)',
      'login.password': '–ü–∞—Ä–æ–ª—å',
      'login.loginBtn': '–í–æ–π—Ç–∏',
      'login.noAccount': '–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?',
      'login.registerLink': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
      'login.forgotPassword': '–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?',
      'register.nickname': '–ü—Å–µ–≤–¥–æ–Ω–∏–º (–±–µ–∑ @)',
      'register.password': '–ü–∞—Ä–æ–ª—å',
      'register.registerBtn': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
      'register.haveAccount': '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?',
      'register.loginLink': '–í–æ–π—Ç–∏',
      'post.placeholder': '–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?',
      'post.publish': '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å',
      'feed.new': '–ù–æ–≤—ã–µ',
      'feed.popular': '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ',
      'search.placeholder': '–ü–æ–∏—Å–∫ –ø–æ @id –∏–ª–∏ –∏–º–µ–Ω–∏...',
      'chat.typing': '–ø–µ—á–∞—Ç–∞–µ—Ç...',
      'chat.placeholder': '–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
      'groups.create': '–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É',
      'groups.createText': '–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É',
      'groups.members': '–£—á–∞—Å—Ç–Ω–∏–∫–∏',
      'channels.create': '–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª',
      'channels.createText': '–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª',
      'channel.postPlaceholder': '–ù–æ–≤—ã–π –ø–æ—Å—Ç...',
      'channel.publish': '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å',
      'settings.title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
      'settings.theme': '–¢–µ–º–∞',
      'settings.language': '–Ø–∑—ã–∫:',
      'settings.privacy': '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
      'settings.logout': '–í—ã–π—Ç–∏',
      'profile.editTitle': '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å',
      'profile.nickname': '–ü—Å–µ–≤–¥–æ–Ω–∏–º',
      'profile.bio': '–û —Å–µ–±–µ',
      'profile.save': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
      'groups.createTitle': '–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É',
      'groups.name': '–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã',
      'groups.desc': '–û–ø–∏—Å–∞–Ω–∏–µ',
      'groups.createBtn': '–°–æ–∑–¥–∞—Ç—å',
      'channels.createTitle': '–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª',
      'channels.name': '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞',
      'channels.desc': '–û–ø–∏—Å–∞–Ω–∏–µ',
      'channels.createBtn': '–°–æ–∑–¥–∞—Ç—å',
      'groups.membersTitle': '–£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã',
      'groups.addMember': 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, @username)',
      'groups.addBtn': '–î–æ–±–∞–≤–∏—Ç—å',
      'privacy.title': '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
      'privacy.content': '<p>–í–∞—à–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–∞ –¥–ª—è –Ω–∞—Å. –≠—Ç–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º—ã —Å–æ–±–∏—Ä–∞–µ–º, –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏ –∑–∞—â–∏—â–∞–µ–º.</p><h4>1. –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º—ã —Å–æ–±–∏—Ä–∞–µ–º</h4><p>–ú—ã —Å–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø—Å–µ–≤–¥–æ–Ω–∏–º, email), –∞ —Ç–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (–ø–æ—Å—Ç—ã, –ª–∞–π–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è).</p><h4>2. –ö–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ</h4><p>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. –ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –±–µ–∑ –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è.</p><h4>3. –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö</h4><p>–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –≤–∞—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p><h4>4. –í–∞—à–∏ –ø—Ä–∞–≤–∞</h4><p>–í—ã –º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞–º —Å –∑–∞–ø—Ä–æ—Å–æ–º –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p><p>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —Ñ–µ–≤—Ä–∞–ª—å 2026</p>'
    },
    be: {
      'nav.home': '–ì–∞–ª–æ—û–Ω–∞—è',
      'nav.search': '–ü–æ—à—É–∫',
      'nav.profile': '–ü—Ä–æ—Ñ—ñ–ª—å',
      'nav.chats': '–ü–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—ñ',
      'nav.groups': '–ì—Ä—É–ø—ã',
      'nav.channels': '–ö–∞–Ω–∞–ª—ã',
      'nav.settings': '–ù–∞–ª–∞–¥—ã',
      'pages.home': '–ì–∞–ª–æ—û–Ω–∞—è',
      'login.nickname': '–ü—Å–µ—û–¥–∞–Ω—ñ–º (–±–µ–∑ @)',
      'login.password': '–ü–∞—Ä–æ–ª—å',
      'login.loginBtn': '–£–≤–∞–π—Å—Ü—ñ',
      'login.noAccount': '–ù—è–º–∞ –∞–∫–∞—û–Ω—Ç–∞?',
      'login.registerLink': '–ó–∞—Ä—ç–≥—ñ—Å—Ç—Ä–∞–≤–∞—Ü—Ü–∞',
      'login.forgotPassword': '–ó–∞–±—ã–ª—ñ –ø–∞—Ä–æ–ª—å?',
      'register.nickname': '–ü—Å–µ—û–¥–∞–Ω—ñ–º (–±–µ–∑ @)',
      'register.password': '–ü–∞—Ä–æ–ª—å',
      'register.registerBtn': '–ó–∞—Ä—ç–≥—ñ—Å—Ç—Ä–∞–≤–∞—Ü—Ü–∞',
      'register.haveAccount': '–£–∂–æ —ë—Å—Ü—å –∞–∫–∞—û–Ω—Ç?',
      'register.loginLink': '–£–≤–∞–π—Å—Ü—ñ',
      'post.placeholder': '–®—Ç–æ –Ω–æ–≤–∞–≥–∞?',
      'post.publish': '–ê–ø—É–±–ª—ñ–∫–∞–≤–∞—Ü—å',
      'feed.new': '–ù–æ–≤—ã—è',
      'feed.popular': '–ü–∞–ø—É–ª—è—Ä–Ω—ã—è',
      'search.placeholder': '–ü–æ—à—É–∫ –ø–∞ @id –∞–±–æ —ñ–º–µ–Ω—ñ...',
      'chat.typing': '–¥—Ä—É–∫—É–µ...',
      'chat.placeholder': '–ù–∞–ø—ñ—à—ã—Ü–µ –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω–µ...',
      'groups.create': '–°—Ç–≤–∞—Ä—ã—Ü—å –≥—Ä—É–ø—É',
      'groups.createText': '–°—Ç–≤–∞—Ä—ã—Ü—å –≥—Ä—É–ø—É',
      'groups.members': '–£–¥–∑–µ–ª—å–Ω—ñ–∫—ñ',
      'channels.create': '–°—Ç–≤–∞—Ä—ã—Ü—å –∫–∞–Ω–∞–ª',
      'channels.createText': '–°—Ç–≤–∞—Ä—ã—Ü—å –∫–∞–Ω–∞–ª',
      'channel.postPlaceholder': '–ù–æ–≤—ã –ø–æ—Å—Ç...',
      'channel.publish': '–ê–ø—É–±–ª—ñ–∫–∞–≤–∞—Ü—å',
      'settings.title': '–ù–∞–ª–∞–¥—ã',
      'settings.theme': '–¢—ç–º–∞',
      'settings.language': '–ú–æ–≤–∞:',
      'settings.privacy': '–ü–∞–ª—ñ—Ç—ã–∫–∞ –ø—Ä—ã–≤–∞—Ç–Ω–∞—Å—Ü—ñ',
      'settings.logout': '–í—ã–π—Å—Ü—ñ',
      'profile.editTitle': '–†—ç–¥–∞–≥–∞–≤–∞—Ü—å –ø—Ä–æ—Ñ—ñ–ª—å',
      'profile.nickname': '–ü—Å–µ—û–¥–∞–Ω—ñ–º',
      'profile.bio': '–ü—Ä–∞ —Å—è–±–µ',
      'profile.save': '–ó–∞—Ö–∞–≤–∞—Ü—å',
      'groups.createTitle': '–°—Ç–≤–∞—Ä—ã—Ü—å –≥—Ä—É–ø—É',
      'groups.name': '–ù–∞–∑–≤–∞ –≥—Ä—É–ø—ã',
      'groups.desc': '–ê–ø—ñ—Å–∞–Ω–Ω–µ',
      'groups.createBtn': '–°—Ç–≤–∞—Ä—ã—Ü—å',
      'channels.createTitle': '–°—Ç–≤–∞—Ä—ã—Ü—å –∫–∞–Ω–∞–ª',
      'channels.name': '–ù–∞–∑–≤–∞ –∫–∞–Ω–∞–ª–∞',
      'channels.desc': '–ê–ø—ñ—Å–∞–Ω–Ω–µ',
      'channels.createBtn': '–°—Ç–≤–∞—Ä—ã—Ü—å',
      'groups.membersTitle': '–£–¥–∑–µ–ª—å–Ω—ñ–∫—ñ –≥—Ä—É–ø—ã',
      'groups.addMember': 'ID –∫–∞—Ä—ã—Å—Ç–∞–ª—å–Ω—ñ–∫–∞ (–Ω–∞–ø—Ä—ã–∫–ª–∞–¥, @username)',
      'groups.addBtn': '–î–∞–¥–∞—Ü—å',
      'privacy.title': '–ü–∞–ª—ñ—Ç—ã–∫–∞ –ø—Ä—ã–≤–∞—Ç–Ω–∞—Å—Ü—ñ',
      'privacy.content': '<p>–í–∞—à–∞ –∫–∞–Ω—Ñ—ñ–¥—ç–Ω—Ü—ã—è–ª—å–Ω–∞—Å—Ü—å –≤–∞–∂–Ω–∞—è –¥–ª—è –Ω–∞—Å. –ì—ç—Ç–∞—è –ø–∞–ª—ñ—Ç—ã–∫–∞ —Ç–ª—É–º–∞—á—ã—Ü—å, —è–∫—ñ—è –¥–∞–Ω—ã—è –º—ã –∑–±—ñ—Ä–∞–µ–º, —è–∫ —ñ—Ö –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–µ–º —ñ –∞–±–∞—Ä–∞–Ω—è–µ–º.</p><h4>1. –Ø–∫—ñ—è –¥–∞–Ω—ã—è –º—ã –∑–±—ñ—Ä–∞–µ–º</h4><p>–ú—ã –∑–±—ñ—Ä–∞–µ–º —ñ–Ω—Ñ–∞—Ä–º–∞—Ü—ã—é, —è–∫—É—é –≤—ã –ø—Ä–∞–¥–∞—Å—Ç–∞—û–ª—è–µ—Ü–µ –ø–∞–¥—á–∞—Å —Ä—ç–≥—ñ—Å—Ç—Ä–∞—Ü—ã—ñ (–ø—Å–µ—û–¥–∞–Ω—ñ–º, email), –∞ —Ç–∞–∫—Å–∞–º–∞ –¥–∞–Ω—ã—è –∞–± –≤–∞—à—ã—Ö –¥–∑–µ—è–Ω–Ω—è—Ö –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (–ø–∞—Å—Ç—ã, –ª–∞–π–∫—ñ, –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—ñ).</p><h4>2. –Ø–∫ –º—ã –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–µ–º –¥–∞–Ω—ã—è</h4><p>–í–∞—à—ã –¥–∞–Ω—ã—è –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞—é—Ü—Ü–∞ –¥–ª—è –∑–∞–±–µ—Å–ø—è—á—ç–Ω–Ω—è –ø—Ä–∞—Ü—ã —Å—ç—Ä–≤—ñ—Å—É, –ø–µ—Ä—Å–∞–Ω–∞–ª—ñ–∑–∞—Ü—ã—ñ –∫–∞–Ω—Ç—ç–Ω—Ç—É —ñ –ø–∞–ª—è–ø—à—ç–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ã—è–Ω–∞–ª—É. –ú—ã –Ω–µ –ø–µ—Ä–∞–¥–∞–µ–º –≤–∞—à—ã –¥–∞–Ω—ã—è —Ç—Ä—ç—Ü—ñ–º –∞—Å–æ–±–∞–º –±–µ–∑ –≤–∞—à–∞–π –∑–≥–æ–¥—ã.</p><h4>3. –ê–±–∞—Ä–æ–Ω–∞ –¥–∞–Ω—ã—Ö</h4><p>–ú—ã –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–µ–º —Å—É—á–∞—Å–Ω—ã—è –º–µ—Ç–∞–¥—ã —à—ã—Ñ—Ä–∞–≤–∞–Ω–Ω—è —ñ –±—è—Å–ø–µ–∫—ñ –¥–ª—è –∞–±–∞—Ä–æ–Ω—ã –≤–∞—à–∞–π —ñ–Ω—Ñ–∞—Ä–º–∞—Ü—ã—ñ.</p><h4>4. –í–∞—à—ã –ø—Ä–∞–≤—ã</h4><p>–í—ã –º–æ–∂–∞—Ü–µ —û –ª—é–±—ã —á–∞—Å –≤—ã–¥–∞–ª—ñ—Ü—å —Å–≤–æ–π –∞–∫–∞—û–Ω—Ç –∞–±–æ –∑–≤—è—Ä–Ω—É—Ü—Ü–∞ –¥–∞ –Ω–∞—Å –∑ –∑–∞–ø—ã—Ç–∞–º –∞–± –ø—Ä–∞–¥–∞—Å—Ç–∞—û–ª–µ–Ω–Ω—ñ —ñ–Ω—Ñ–∞—Ä–º–∞—Ü—ã—ñ.</p><p>–ê–ø–æ—à–Ω—è–µ –∞–±–Ω–∞—û–ª–µ–Ω–Ω–µ: –ª—é—Ç—ã 2026</p>'
    },
    cs: {
      'nav.home': 'Dom≈Ø',
      'nav.search': 'Hledat',
      'nav.profile': 'Profil',
      'nav.chats': 'Zpr√°vy',
      'nav.groups': 'Skupiny',
      'nav.channels': 'Kan√°ly',
      'nav.settings': 'Nastaven√≠',
      'pages.home': 'Dom≈Ø',
      'login.nickname': 'P≈ôezd√≠vka (bez @)',
      'login.password': 'Heslo',
      'login.loginBtn': 'P≈ôihl√°sit se',
      'login.noAccount': 'Nem√°te √∫ƒçet?',
      'login.registerLink': 'Registrovat se',
      'login.forgotPassword': 'Zapomnƒõli jste heslo?',
      'register.nickname': 'P≈ôezd√≠vka (bez @)',
      'register.password': 'Heslo',
      'register.registerBtn': 'Registrovat se',
      'register.haveAccount': 'Ji≈æ m√°te √∫ƒçet?',
      'register.loginLink': 'P≈ôihl√°sit se',
      'post.placeholder': 'Co je nov√©ho?',
      'post.publish': 'Zve≈ôejnit',
      'feed.new': 'Nov√©',
      'feed.popular': 'Popul√°rn√≠',
      'search.placeholder': 'Hledat podle @id nebo jm√©na...',
      'chat.typing': 'p√≠≈°e...',
      'chat.placeholder': 'Napi≈°te zpr√°vu...',
      'groups.create': 'Vytvo≈ôit skupinu',
      'groups.createText': 'Vytvo≈ôit skupinu',
      'groups.members': 'ƒålenov√©',
      'channels.create': 'Vytvo≈ôit kan√°l',
      'channels.createText': 'Vytvo≈ôit kan√°l',
      'channel.postPlaceholder': 'Nov√Ω p≈ô√≠spƒõvek...',
      'channel.publish': 'Zve≈ôejnit',
      'settings.title': 'Nastaven√≠',
      'settings.theme': 'Motiv',
      'settings.language': 'Jazyk:',
      'settings.privacy': 'Z√°sady ochrany osobn√≠ch √∫daj≈Ø',
      'settings.logout': 'Odhl√°sit se',
      'profile.editTitle': 'Upravit profil',
      'profile.nickname': 'P≈ôezd√≠vka',
      'profile.bio': 'O mnƒõ',
      'profile.save': 'Ulo≈æit',
      'groups.createTitle': 'Vytvo≈ôit skupinu',
      'groups.name': 'N√°zev skupiny',
      'groups.desc': 'Popis',
      'groups.createBtn': 'Vytvo≈ôit',
      'channels.createTitle': 'Vytvo≈ôit kan√°l',
      'channels.name': 'N√°zev kan√°lu',
      'channels.desc': 'Popis',
      'channels.createBtn': 'Vytvo≈ôit',
      'groups.membersTitle': 'ƒålenov√© skupiny',
      'groups.addMember': 'ID u≈æivatele (nap≈ô. @u≈æivatel)',
      'groups.addBtn': 'P≈ôidat',
      'privacy.title': 'Z√°sady ochrany osobn√≠ch √∫daj≈Ø',
      'privacy.content': '<p>Va≈°e soukrom√≠ je pro n√°s d≈Øle≈æit√©. Tyto z√°sady vysvƒõtluj√≠, jak√© √∫daje shroma≈æƒèujeme, jak je pou≈æ√≠v√°me a chr√°n√≠me.</p><h4>1. Jak√© √∫daje shroma≈æƒèujeme</h4><p>Shroma≈æƒèujeme informace, kter√© poskytujete p≈ôi registraci (p≈ôezd√≠vka, e-mail), a tak√© √∫daje o va≈°ich aktivit√°ch na platformƒõ (p≈ô√≠spƒõvky, lajky, zpr√°vy).</p><h4>2. Jak pou≈æ√≠v√°me √∫daje</h4><p>Va≈°e √∫daje jsou pou≈æ√≠v√°ny k poskytov√°n√≠ slu≈æby, personalizaci obsahu a zlep≈°ov√°n√≠ funkc√≠. Va≈°e √∫daje nesd√≠l√≠me s t≈ôet√≠mi stranami bez va≈°eho souhlasu.</p><h4>3. Ochrana √∫daj≈Ø</h4><p>Pou≈æ√≠v√°me modern√≠ metody ≈°ifrov√°n√≠ a zabezpeƒçen√≠ k ochranƒõ va≈°ich informac√≠.</p><h4>4. Va≈°e pr√°va</h4><p>Sv≈Øj √∫ƒçet m≈Ø≈æete kdykoli smazat nebo n√°s kontaktovat s ≈æ√°dost√≠ o poskytnut√≠ informac√≠.</p><p>Posledn√≠ aktualizace: √∫nor 2026</p>'
    },
    kk: {
      'nav.home': '–ë–∞—Å—Ç—ã –±–µ—Ç',
      'nav.search': '–Ü–∑–¥–µ—É',
      'nav.profile': '–ü—Ä–æ—Ñ–∏–ª—å',
      'nav.chats': '–•–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä',
      'nav.groups': '–¢–æ–ø—Ç–∞—Ä',
      'nav.channels': '–ê—Ä–Ω–∞–ª–∞—Ä',
      'nav.settings': '–ë–∞–ø—Ç–∞—É–ª–∞—Ä',
      'pages.home': '–ë–∞—Å—Ç—ã –±–µ—Ç',
      'login.nickname': '–õ–∞“õ–∞–ø –∞—Ç (@-—Å—ñ–∑)',
      'login.password': '“ö“±–ø–∏—è —Å”©–∑',
      'login.loginBtn': '–ö—ñ—Ä—É',
      'login.noAccount': '–ê–∫–∫–∞—É–Ω—Ç –∂–æ“õ –ø–∞?',
      'login.registerLink': '–¢—ñ—Ä–∫–µ–ª—É',
      'login.forgotPassword': '“ö“±–ø–∏—è —Å”©–∑–¥—ñ “±–º—ã—Ç—Ç—ã“£—ã–∑ –±–∞?',
      'register.nickname': '–õ–∞“õ–∞–ø –∞—Ç (@-—Å—ñ–∑)',
      'register.password': '“ö“±–ø–∏—è —Å”©–∑',
      'register.registerBtn': '–¢—ñ—Ä–∫–µ–ª—É',
      'register.haveAccount': '–ê–∫–∫–∞—É–Ω—Ç—ã“£—ã–∑ –±–∞—Ä –º–∞?',
      'register.loginLink': '–ö—ñ—Ä—É',
      'post.placeholder': '–ù–µ –∂–∞“£–∞–ª—ã“õ?',
      'post.publish': '–ñ–∞—Ä–∏—è–ª–∞—É',
      'feed.new': '–ñ–∞“£–∞',
      'feed.popular': '–¢–∞–Ω—ã–º–∞–ª',
      'search.placeholder': '@id –Ω–µ–º–µ—Å–µ –∞—Ç—ã –±–æ–π—ã–Ω—à–∞ —ñ–∑–¥–µ—É...',
      'chat.typing': '—Ç–µ—Ä—É–¥–µ...',
      'chat.placeholder': '–•–∞–±–∞—Ä–ª–∞–º–∞ –∂–∞–∑—ã“£—ã–∑...',
      'groups.create': '–¢–æ–ø “õ“±—Ä—É',
      'groups.createText': '–¢–æ–ø “õ“±—Ä—É',
      'groups.members': '“ö–∞—Ç—ã—Å—É—à—ã–ª–∞—Ä',
      'channels.create': '–ê—Ä–Ω–∞ “õ“±—Ä—É',
      'channels.createText': '–ê—Ä–Ω–∞ “õ“±—Ä—É',
      'channel.postPlaceholder': '–ñ–∞“£–∞ –ø–æ—Å—Ç...',
      'channel.publish': '–ñ–∞—Ä–∏—è–ª–∞—É',
      'settings.title': '–ë–∞–ø—Ç–∞—É–ª–∞—Ä',
      'settings.theme': '–¢–∞“õ—ã—Ä—ã–ø',
      'settings.language': '–¢—ñ–ª:',
      'settings.privacy': '“ö“±–ø–∏—è–ª—ã–ª—ã“õ —Å–∞—è—Å–∞—Ç—ã',
      'settings.logout': '–®—ã“ì—É',
      'profile.editTitle': '–ü—Ä–æ—Ñ–∏–ª—å–¥—ñ ”©“£–¥–µ—É',
      'profile.nickname': '–õ–∞“õ–∞–ø –∞—Ç',
      'profile.bio': '”®–∑—ñ–º —Ç—É—Ä–∞–ª—ã',
      'profile.save': '–°–∞“õ—Ç–∞—É',
      'groups.createTitle': '–¢–æ–ø “õ“±—Ä—É',
      'groups.name': '–¢–æ–ø –∞—Ç–∞—É—ã',
      'groups.desc': '–°–∏–ø–∞—Ç—Ç–∞–º–∞',
      'groups.createBtn': '“ö“±—Ä—É',
      'channels.createTitle': '–ê—Ä–Ω–∞ “õ“±—Ä—É',
      'channels.name': '–ê—Ä–Ω–∞ –∞—Ç–∞—É—ã',
      'channels.desc': '–°–∏–ø–∞—Ç—Ç–∞–º–∞',
      'channels.createBtn': '“ö“±—Ä—É',
      'groups.membersTitle': '–¢–æ–ø –º“Ø—à–µ–ª–µ—Ä—ñ',
      'groups.addMember': '–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã ID (–º—ã—Å–∞–ª—ã, @username)',
      'groups.addBtn': '“ö–æ—Å—É',
      'privacy.title': '“ö“±–ø–∏—è–ª—ã–ª—ã“õ —Å–∞—è—Å–∞—Ç—ã',
      'privacy.content': '<p>–°—ñ–∑–¥—ñ“£ “õ“±–ø–∏—è–ª—ã–ª—ã“ì—ã“£—ã–∑ –±—ñ–∑ “Ø—à—ñ–Ω –º–∞“£—ã–∑–¥—ã. –ë“±–ª —Å–∞—è—Å–∞—Ç “õ–∞–Ω–¥–∞–π –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂–∏–Ω–∞–π—Ç—ã–Ω—ã–º—ã–∑–¥—ã, –æ–ª–∞—Ä–¥—ã “õ–∞–ª–∞–π –ø–∞–π–¥–∞–ª–∞–Ω–∞—Ç—ã–Ω—ã–º—ã–∑–¥—ã –∂”ô–Ω–µ “õ–æ—Ä“ì–∞–π—Ç—ã–Ω—ã–º—ã–∑–¥—ã —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä–µ–¥—ñ.</p><h4>1. –ë—ñ–∑ “õ–∞–Ω–¥–∞–π –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂–∏–Ω–∞–π–º—ã–∑</h4><p>–ë—ñ–∑ —Ç—ñ—Ä–∫–µ—É –∫–µ–∑—ñ–Ω–¥–µ —Å—ñ–∑ “±—Å—ã–Ω–∞—Ç—ã–Ω –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã (–ª–∞“õ–∞–ø –∞—Ç, email), —Å–æ–Ω–¥–∞–π-–∞“õ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–¥–∞“ì—ã ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Ä—ñ“£—ñ–∑ —Ç—É—Ä–∞–ª—ã –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ (–ø–æ—Å—Ç—Ç–∞—Ä, –ª–∞–π–∫—Ç–∞—Ä, —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä) –∂–∏–Ω–∞–π–º—ã–∑.</p><h4>2. –î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ “õ–∞–ª–∞–π –ø–∞–π–¥–∞–ª–∞–Ω–∞–º—ã–∑</h4><p>–°—ñ–∑–¥—ñ“£ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ“£—ñ–∑ “õ—ã–∑–º–µ—Ç—Ç—ñ “õ–∞–º—Ç–∞–º–∞—Å—ã–∑ –µ—Ç—É, –º–∞–∑–º“±–Ω–¥—ã —Ç–µ“£—à–µ—É –∂”ô–Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–¥—ã–ª—ã“õ—Ç—ã –∂–∞“õ—Å–∞—Ä—Ç—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–∞–¥—ã. –ë—ñ–∑ —Å—ñ–∑–¥—ñ“£ –∫–µ–ª—ñ—Å—ñ–º—ñ“£—ñ–∑—Å—ñ–∑ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ“£—ñ–∑–¥—ñ “Ø—à—ñ–Ω—à—ñ —Ç“±–ª“ì–∞–ª–∞—Ä“ì–∞ –±–µ—Ä–º–µ–π–º—ñ–∑.</p><h4>3. –î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ “õ–æ—Ä“ì–∞—É</h4><p>–ë—ñ–∑ –∞“õ–ø–∞—Ä–∞—Ç—ã“£—ã–∑–¥—ã “õ–æ—Ä“ì–∞—É “Ø—à—ñ–Ω –∑–∞–º–∞–Ω–∞—É–∏ —à–∏—Ñ—Ä–ª–∞—É –∂”ô–Ω–µ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ ”ô–¥—ñ—Å—Ç–µ—Ä—ñ–Ω “õ–æ–ª–¥–∞–Ω–∞–º—ã–∑.</p><h4>4. –°—ñ–∑–¥—ñ“£ “õ“±“õ—ã“õ—Ç–∞—Ä—ã“£—ã–∑</h4><p>–°—ñ–∑ –∫–µ–∑ –∫–µ–ª–≥–µ–Ω —É–∞“õ—ã—Ç—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç—ã“£—ã–∑–¥—ã –∂–æ—è –∞–ª–∞—Å—ã–∑ –Ω–µ–º–µ—Å–µ –∞“õ–ø–∞—Ä–∞—Ç –±–µ—Ä—É —Ç—É—Ä–∞–ª—ã —Å“±—Ä–∞—É–º–µ–Ω –±—ñ–∑–≥–µ —Ö–∞–±–∞—Ä–ª–∞—Å–∞ –∞–ª–∞—Å—ã–∑.</p><p>–°–æ“£“ì—ã –∂–∞“£–∞—Ä—Ç—É: –∞“õ–ø–∞–Ω 2026</p>'
    }
  };

  let currentLanguage = localStorage.getItem('language') || 'uk';

  function applyLanguage(lang) {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (translations[lang] && translations[lang][key]) {
        el.textContent = translations[lang][key];
      }
    });
    const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
    placeholders.forEach(el => {
      const key = el.getAttribute('data-i18n-placeholder');
      if (translations[lang] && translations[lang][key]) {
        el.placeholder = translations[lang][key];
      }
    });
    // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É title
    const pageTitle = document.getElementById('pageTitle');
    if (pageTitle && translations[lang]['pages.home']) {
      pageTitle.textContent = translations[lang]['pages.home'];
    }
    // privacy modal content
    const privacyContent = document.querySelector('#privacyPolicyModal [data-i18n="privacy.content"]');
    if (privacyContent && translations[lang]['privacy.content']) {
      privacyContent.innerHTML = translations[lang]['privacy.content'];
    }
  }

  // ================= –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó =================
  const showToast = (msg) => {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  };

  const vibrate = (ms) => { if (navigator.vibrate) navigator.vibrate(ms); };

  const updateUnreadBadge = () => {
    const badge = document.getElementById('unreadBadge');
    if (unreadCount > 0) {
      badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
      badge.style.display = 'inline-block';
    } else {
      badge.style.display = 'none';
    }
  };

  // –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—ñ–¥–ø–∏—Å–æ–∫
  const cleanupListeners = () => {
    if (unsubscribeFeed) { unsubscribeFeed(); unsubscribeFeed = null; }
    if (unsubscribeChat) { unsubscribeChat(); unsubscribeChat = null; }
    if (unsubscribeChatList) { unsubscribeChatList(); unsubscribeChatList = null; }
    if (unsubscribeGroup) { unsubscribeGroup(); unsubscribeGroup = null; }
    if (unsubscribeChannel) { unsubscribeChannel(); unsubscribeChannel = null; }
    if (unsubscribeGroups) { unsubscribeGroups(); unsubscribeGroups = null; }
    if (unsubscribeChannels) { unsubscribeChannels(); unsubscribeChannels = null; }
    if (unsubscribeTyping) { unsubscribeTyping(); unsubscribeTyping = null; }
    if (lastOnlineInterval) { clearInterval(lastOnlineInterval); lastOnlineInterval = null; }
  };

  // ================= –ù–∞–≤—ñ–≥–∞—Ü—ñ—è =================
  const sections = ['home','search','profile','chats','groups','channels','settings'];
  const navItems = document.querySelectorAll('.nav-item');
  navItems.forEach(item => {
    item.addEventListener('click', () => {
      const section = item.dataset.section;
      navItems.forEach(n => n.classList.remove('active'));
      item.classList.add('active');
      sections.forEach(s => document.getElementById(s).classList.remove('active'));
      document.getElementById(section).classList.add('active');
      const pageTitle = document.getElementById('pageTitle');
      if (pageTitle) {
        const key = 'pages.' + section;
        pageTitle.textContent = translations[currentLanguage][key] || section;
      }
      
      // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
      if (section === 'home') resetPagination();
      if (section === 'search' && currentUser) loadSearchUsers();
      if (section === 'chats' && currentUser) loadChatList();
      if (section === 'groups' && currentUser) loadGroups();
      if (section === 'channels' && currentUser) loadChannels();
      if (section === 'profile' && currentUser) loadMyProfile();
      
      // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ sidebar –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É
      document.getElementById('sidebar').classList.remove('open');
      document.getElementById('menuToggle').classList.remove('active');
    });
  });

  document.getElementById('menuToggle').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('menuToggle').classList.toggle('active');
  });

  // ================= –ï–º–æ–¥–∂—ñ-–ø—ñ–∫–µ—Ä (—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π) =================
  const emojiList = ['üòÄ','üòÉ','üòÑ','üòÅ','üòÜ','üòÖ','üòÇ','ü§£','üòä','üòá','üôÇ','üôÉ','üòâ','üòå','üòç','ü•∞','üòò','üòó','üòô','üòö','üòã','üòõ','üòù','üòú','ü§™','ü§®','üßê','ü§ì','üòé','ü•∏','ü§©','ü•≥','üòè','üòí','üòû','üòî','üòü','üòï','üôÅ','‚òπÔ∏è','üò£','üòñ','üò´','üò©','ü•∫','üò¢','üò≠','üò§','üò†','üò°','ü§¨','ü§Ø','üò≥','ü•µ','ü•∂','üò±','üò®','üò∞','üò•','üòì','ü§ó','ü§î','ü§≠','ü§´','ü§•','üò∂','üòê','üòë','üò¨','üôÑ','üòØ','üò¶','üòß','üòÆ','üò≤','ü•±','üò¥','ü§§','üò™','üòµ','ü§ê','ü•¥','ü§¢','ü§Æ','ü§ß','üò∑','ü§í','ü§ï','ü§ë','ü§†','üòà','üëø','üëπ','üë∫','ü§°','üí©','üëª','üíÄ','‚ò†Ô∏è','üëΩ','üëæ','ü§ñ','üéÉ','üò∫','üò∏','üòπ','üòª','üòº','üòΩ','üôÄ','üòø','üòæ'];
  
  function setupEmojiPicker(buttonId, pickerId, inputId) {
    const btn = document.getElementById(buttonId);
    const picker = document.getElementById(pickerId);
    const input = document.getElementById(inputId);
    if (!btn || !picker || !input) return;
    
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      picker.style.display = picker.style.display === 'none' ? 'grid' : 'none';
    });
    
    picker.innerHTML = '';
    emojiList.forEach(emoji => {
      const span = document.createElement('span');
      span.textContent = emoji;
      span.onclick = (e) => {
        e.stopPropagation();
        const start = input.selectionStart;
        const end = input.selectionEnd;
        const text = input.value;
        input.value = text.substring(0, start) + emoji + text.substring(end);
        input.focus();
        input.selectionStart = input.selectionEnd = start + emoji.length;
        picker.style.display = 'none';
      };
      picker.appendChild(span);
    });
    
    document.addEventListener('click', (e) => {
      if (!picker.contains(e.target) && e.target !== btn) {
        picker.style.display = 'none';
      }
    });
  }

  // ================= –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è =================
  document.getElementById('toRegister').onclick = () => {
    document.getElementById('loginForm').style.display = 'none';
    document.getElementById('registerForm').style.display = 'block';
  };
  document.getElementById('toLogin').onclick = () => {
    document.getElementById('registerForm').style.display = 'none';
    document.getElementById('loginForm').style.display = 'block';
  };

  document.getElementById('registerBtn').onclick = async () => {
    const nickname = document.getElementById('registerNickname').value.trim();
    const password = document.getElementById('registerPassword').value.trim();
    if (!nickname) return alert('–í–≤–µ–¥—ñ—Ç—å –ø—Å–µ–≤–¥–æ–Ω—ñ–º');
    if (password.length < 6) return alert('–ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤');
    
    const userId = `@${nickname.toLowerCase()}`;
    const q = query(collection(db, "users"), where("userId", "==", userId));
    const snap = await getDocs(q);
    if (!snap.empty) return alert('–¶–µ–π ID –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π');
    
    try {
      const safeNick = nickname.toLowerCase().replace(/[^a-z0-9]/g, '');
      const email = `${safeNick}@fantasyas.local`;
      const cred = await createUserWithEmailAndPassword(auth, email, password);
      await setDoc(doc(db, "users", cred.user.uid), {
        nickname,
        userId,
        nickname_lower: nickname.toLowerCase(),
        bio: '',
        avatar: '',
        posts: [],
        likedPosts: [],
        savedPosts: [],
        followers: [],
        following: [],
        createdAt: serverTimestamp(),
        lastOnline: serverTimestamp()
      });
      showToast('–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞');
      document.getElementById('toLogin').click();
    } catch (e) { showToast(e.message); }
  };

  document.getElementById('loginBtn').onclick = async () => {
    const nickname = document.getElementById('loginNickname').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    if (!nickname || !password) return alert('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ–ª—è');
    try {
      const safeNick = nickname.toLowerCase().replace(/[^a-z0-9]/g, '');
      const email = `${safeNick}@fantasyas.local`;
      await signInWithEmailAndPassword(auth, email, password);
      showToast('–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!');
    } catch { alert('–ù–µ–≤—ñ—Ä–Ω–∏–π –ø—Å–µ–≤–¥–æ–Ω—ñ–º –∞–±–æ –ø–∞—Ä–æ–ª—å'); }
  };

  document.getElementById('googleLoginBtn').onclick = async () => {
    const provider = new GoogleAuthProvider();
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      const userDoc = await getDoc(doc(db, "users", user.uid));
      if (!userDoc.exists()) {
        const nickname = user.displayName || user.email?.split('@')[0] || 'user';
        let userId = `@${nickname.toLowerCase()}`;
        const q = query(collection(db, "users"), where("userId", "==", userId));
        const snap = await getDocs(q);
        if (!snap.empty) userId = `@${nickname.toLowerCase()}${Math.floor(Math.random()*1000)}`;
        await setDoc(doc(db, "users", user.uid), {
          nickname,
          userId,
          nickname_lower: nickname.toLowerCase(),
          bio: '',
          avatar: user.photoURL || '',
          posts: [],
          likedPosts: [],
          savedPosts: [],
          followers: [],
          following: [],
          createdAt: serverTimestamp(),
          lastOnline: serverTimestamp()
        });
      }
      showToast('–í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google —É—Å–ø—ñ—à–Ω–∏–π');
    } catch (error) {
      showToast('–ü–æ–º–∏–ª–∫–∞: ' + error.message);
    }
  };

  document.getElementById('appleLoginBtn').onclick = async () => {
    const provider = new OAuthProvider('apple.com');
    provider.addScope('email');
    provider.addScope('name');
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      const userDoc = await getDoc(doc(db, "users", user.uid));
      if (!userDoc.exists()) {
        const nickname = user.displayName || user.email?.split('@')[0] || 'user';
        let userId = `@${nickname.toLowerCase()}`;
        const q = query(collection(db, "users"), where("userId", "==", userId));
        const snap = await getDocs(q);
        if (!snap.empty) userId = `@${nickname.toLowerCase()}${Math.floor(Math.random()*1000)}`;
        await setDoc(doc(db, "users", user.uid), {
          nickname,
          userId,
          nickname_lower: nickname.toLowerCase(),
          bio: '',
          avatar: user.photoURL || '',
          posts: [],
          likedPosts: [],
          savedPosts: [],
          followers: [],
          following: [],
          createdAt: serverTimestamp(),
          lastOnline: serverTimestamp()
        });
      }
      showToast('–í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Apple —É—Å–ø—ñ—à–Ω–∏–π');
    } catch (error) {
      showToast('–ü–æ–º–∏–ª–∫–∞: ' + error.message);
    }
  };

  document.getElementById('forgotPassword').onclick = async (e) => {
    e.preventDefault();
    const email = prompt('–í–≤–µ–¥—ñ—Ç—å –≤–∞—à email');
    if (email) {
      try {
        await sendPasswordResetEmail(auth, email);
        showToast('–õ–∏—Å—Ç –¥–ª—è —Å–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ');
      } catch (err) {
        showToast('–ü–æ–º–∏–ª–∫–∞: ' + err.message);
      }
    }
  };

  onAuthStateChanged(auth, (user) => {
    cleanupListeners();
    
    if (user) {
      currentUser = user;
      document.getElementById('authBox').style.display = 'none';
      document.getElementById('newPostBox').style.display = 'block';
      
      // –û–Ω–æ–≤–ª–µ–Ω–Ω—è lastOnline –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
      lastOnlineInterval = setInterval(() => {
        updateDoc(doc(db, "users", currentUser.uid), { lastOnline: serverTimestamp() });
      }, 30000);
      
      resetPagination();
      loadMyProfile();
      
      // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
      const q = query(collection(db, "chats"), where("participants", "array-contains", currentUser.uid));
      unsubscribeChatList = onSnapshot(q, (snapshot) => {
        let totalUnread = 0;
        snapshot.forEach(doc => {
          const data = doc.data();
          if (data.unread && data.unread[currentUser.uid]) {
            totalUnread += data.unread[currentUser.uid];
          }
        });
        unreadCount = totalUnread;
        updateUnreadBadge();
      });

      // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –µ–º–æ–¥–∂—ñ-–ø—ñ–∫–µ—Ä—ñ–≤
      setupEmojiPicker('postEmojiBtn', 'postEmojiPicker', 'postText');
      setupEmojiPicker('chatEmojiBtn', 'chatEmojiPicker', 'chatText');
      setupEmojiPicker('groupEmojiBtn', 'groupEmojiPicker', 'groupChatText');
      setupEmojiPicker('channelEmojiBtn', 'channelEmojiPicker', 'channelPostText');
    } else {
      currentUser = null;
      document.getElementById('authBox').style.display = 'block';
      document.getElementById('newPostBox').style.display = 'none';
      unreadCount = 0;
      updateUnreadBadge();
    }
  });

  // ================= –°—Ç—Ä—ñ—á–∫–∞ =================
  document.getElementById('feedNewBtn').onclick = () => {
    if (currentFeedType === 'new') return;
    currentFeedType = 'new';
    resetPagination();
  };
  document.getElementById('feedPopularBtn').onclick = () => {
    if (currentFeedType === 'popular') return;
    currentFeedType = 'popular';
    resetPagination();
  };

  function resetPagination() {
    lastVisible = null;
    hasMore = true;
    document.getElementById('feed').innerHTML = '';
    loadMorePosts();
  }

  // –§—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–¥—ñ–∞
  async function uploadMedia(file, pathPrefix) {
    const storageRef = ref(storage, `${pathPrefix}/${Date.now()}_${file.name}`);
    await uploadBytes(storageRef, file);
    const url = await getDownloadURL(storageRef);
    const type = file.type.split('/')[0]; // 'image', 'video', 'audio'
    return { url, type };
  }

  document.getElementById('addPost').onclick = async () => {
    if (!currentUser) return alert('–£–≤—ñ–π–¥—ñ—Ç—å');
    const text = document.getElementById('postText').value.trim();
    const file = document.getElementById('postMedia').files[0];
    if (!text && !file) return alert('–î–æ–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç –∞–±–æ –º–µ–¥—ñ–∞');
    try {
      let mediaUrl = '', mediaType = '';
      if (file) {
        const uploaded = await uploadMedia(file, `posts/${currentUser.uid}`);
        mediaUrl = uploaded.url;
        mediaType = uploaded.type;
      }
      const userSnap = await getDoc(doc(db, "users", currentUser.uid));
      const userData = userSnap.data();
      const postDoc = await addDoc(collection(db, "posts"), {
        author: currentUser.uid,
        authorType: 'user',
        authorName: userData.nickname,
        authorUserId: userData.userId,
        authorAvatar: userData.avatar || '',
        text,
        mediaUrl,
        mediaType,
        createdAt: serverTimestamp(),
        likes: [],
        likesCount: 0,
        commentsCount: 0,
        saves: []
      });
      await updateDoc(doc(db, "users", currentUser.uid), { posts: arrayUnion(postDoc.id) });
      document.getElementById('postText').value = '';
      document.getElementById('postMedia').value = '';
      showToast('–ü–æ—Å—Ç –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ!');
    } catch (e) { showToast(e.message); }
  };

  async function loadMorePosts() {
    if (!currentUser || loading || !hasMore) return;
    loading = true;
    document.getElementById('skeletonContainer').style.display = 'block';
    
    try {
      let q;
      if (currentFeedType === 'new') {
        q = query(collection(db, "posts"), orderBy("createdAt", "desc"), limit(10));
      } else {
        // –î–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –ø–æ—Ç—Ä—ñ–±–µ–Ω —Å–∫–ª–∞–¥–µ–Ω–∏–π —ñ–Ω–¥–µ–∫—Å: likesCount DESC, createdAt DESC
        q = query(collection(db, "posts"), orderBy("likesCount", "desc"), orderBy("createdAt", "desc"), limit(10));
      }
      if (lastVisible) q = query(q, startAfter(lastVisible));
      
      const snapshot = await getDocs(q);
      if (snapshot.empty) { hasMore = false; return; }
      
      lastVisible = snapshot.docs[snapshot.docs.length - 1];
      renderPosts(snapshot.docs);
    } catch (e) {
      console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤:", e);
      showToast("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω–¥–µ–∫—Å–∏ Firestore.");
    } finally {
      document.getElementById('skeletonContainer').style.display = 'none';
      loading = false;
    }
  }

  async function loadComments(postId, container) {
    const q = query(collection(db, `posts/${postId}/comments`), orderBy("createdAt", "asc"));
    const snapshot = await getDocs(q);
    container.innerHTML = '';
    snapshot.forEach(doc => {
      const comment = doc.data();
      const commentEl = document.createElement('div');
      commentEl.className = 'comment';
      commentEl.innerHTML = `
        <div class="comment-avatar" style="background-image:url(${comment.authorAvatar || ''})" data-uid="${comment.author}"></div>
        <div class="comment-content">
          <div>
            <span class="comment-author" data-uid="${comment.author}">${comment.authorName}</span>
            <span class="comment-time">${new Date(comment.createdAt?.seconds * 1000).toLocaleString()}</span>
          </div>
          <div class="comment-text">${comment.text}</div>
        </div>
      `;
      container.appendChild(commentEl);
    });
  }

  async function addComment(postId, text) {
    if (!currentUser || !text.trim()) return;
    const userSnap = await getDoc(doc(db, "users", currentUser.uid));
    const user = userSnap.data();
    const commentRef = collection(db, `posts/${postId}/comments`);
    await addDoc(commentRef, {
      author: currentUser.uid,
      authorName: user.nickname,
      authorAvatar: user.avatar || '',
      text: text.trim(),
      createdAt: serverTimestamp()
    });
    await updateDoc(doc(db, "posts", postId), { commentsCount: increment(1) });
  }

  function renderPosts(docs) {
    const feed = document.getElementById('feed');
    docs.forEach(docSnap => {
      const post = { id: docSnap.id, ...docSnap.data() };
      const liked = post.likes?.includes(currentUser?.uid) || false;
      const saved = post.saves?.includes(currentUser?.uid) || false;
      const postEl = document.createElement('div');
      postEl.className = 'post';
      postEl.dataset.postId = post.id;
      
      let mediaHtml = '';
      if (post.mediaUrl) {
        if (post.mediaType === 'image') {
          mediaHtml = `<img src="${post.mediaUrl}" class="post-media" loading="lazy">`;
        } else if (post.mediaType === 'video') {
          mediaHtml = `<video src="${post.mediaUrl}" controls class="post-media"></video>`;
        } else if (post.mediaType === 'audio') {
          mediaHtml = `<audio src="${post.mediaUrl}" controls class="post-media"></audio>`;
        }
      }

      postEl.innerHTML = `
        <div class="post-header">
          <div class="avatar" style="background-image:url(${post.authorAvatar || ''})" data-uid="${post.author}"></div>
          <div>
            <div class="post-author" data-uid="${post.author}">${post.authorName || '–ù–µ–≤—ñ–¥–æ–º–æ'}</div>
            <div class="post-meta">${post.authorUserId || ''}</div>
          </div>
        </div>
        <div class="post-content">${post.text || ''}</div>
        ${mediaHtml}
        <div class="post-footer">
          <button class="like-btn ${liked ? 'liked' : ''}" data-post-id="${post.id}">
            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            <span>${post.likesCount || 0}</span>
          </button>
          <button class="comment-toggle-btn" data-post-id="${post.id}">
            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
            <span>${post.commentsCount || 0}</span>
          </button>
          <button class="save-btn ${saved ? 'saved' : ''}" data-post-id="${post.id}">
            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>
          </button>
          <button class="share-btn" data-post-id="${post.id}">
            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          </button>
        </div>
        <div class="comments-section" id="comments-${post.id}" style="display: none;">
          <div class="comments-list" id="comments-list-${post.id}"></div>
          <div class="comment-form">
            <input type="text" id="comment-input-${post.id}" class="comment-input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä...">
            <div class="emoji-picker-container" style="position: relative;">
              <button class="emoji-button" id="comment-emoji-${post.id}">üòä</button>
              <div class="emoji-picker" id="comment-picker-${post.id}" style="display: none; bottom: 100%; right: 0; position: absolute;"></div>
            </div>
            <button class="btn btn-primary btn-icon" id="submit-comment-${post.id}">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
          </div>
        </div>
      `;
      feed.appendChild(postEl);

      // –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –µ–º–æ–¥–∂—ñ-–ø—ñ–∫–µ—Ä –¥–ª—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è —Ü—å–æ–≥–æ –ø–æ—Å—Ç–∞
      const commentInput = document.getElementById(`comment-input-${post.id}`);
      if (commentInput) {
        setupEmojiPicker(`comment-emoji-${post.id}`, `comment-picker-${post.id}`, `comment-input-${post.id}`);
      }

      // –û–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
      const toggleBtn = postEl.querySelector('.comment-toggle-btn');
      const commentsSection = postEl.querySelector('.comments-section');
      toggleBtn.onclick = async () => {
        if (commentsSection.style.display === 'none') {
          commentsSection.style.display = 'block';
          await loadComments(post.id, document.getElementById(`comments-list-${post.id}`));
        } else {
          commentsSection.style.display = 'none';
        }
      };

      // –û–±—Ä–æ–±–Ω–∏–∫ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—è
      const submitBtn = document.getElementById(`submit-comment-${post.id}`);
      if (submitBtn) {
        submitBtn.onclick = async () => {
          const text = commentInput.value.trim();
          if (!text) return;
          await addComment(post.id, text);
          commentInput.value = '';
          await loadComments(post.id, document.getElementById(`comments-list-${post.id}`));
          // –û–Ω–æ–≤–ª—é—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
          const countSpan = toggleBtn.querySelector('span');
          countSpan.textContent = parseInt(countSpan.textContent) + 1;
        };
      }
    });
  }

  // ================= –ü–æ—à—É–∫ =================
  async function loadSearchUsers() {
    if (!currentUser) return;
    const val = document.getElementById('searchInput').value.trim().toLowerCase();
    const userList = document.getElementById('userList');
    if (!val) { userList.innerHTML = ''; return; }
    
    const mySnap = await getDoc(doc(db, "users", currentUser.uid));
    const myFollowing = mySnap.data().following || [];
    
    const q1 = query(collection(db, "users"), where("userId", ">=", val.startsWith('@') ? val : `@${val}`), where("userId", "<=", (val.startsWith('@') ? val : `@${val}`) + '\uf8ff'));
    const q2 = query(collection(db, "users"), where("nickname_lower", ">=", val), where("nickname_lower", "<=", val + '\uf8ff'));
    
    const [snap1, snap2] = await Promise.all([getDocs(q1), getDocs(q2)]);
    const usersMap = new Map();
    snap1.forEach(d => usersMap.set(d.id, d.data()));
    snap2.forEach(d => usersMap.set(d.id, d.data()));
    
    userList.innerHTML = '';
    usersMap.forEach((data, uid) => {
      if (uid === currentUser.uid) return;
      const isFollowing = myFollowing.includes(uid);
      const div = document.createElement('div');
      div.className = 'chat-item';
      div.innerHTML = `
        <div class="avatar small" style="background-image:url(${data.avatar || ''})"></div>
        <div class="chat-info">
          <div class="chat-name">${data.nickname}</div>
          <div class="chat-last">${data.userId}</div>
        </div>
        <button class="btn follow-btn">${isFollowing ? '–í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è' : '–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è'}</button>
      `;
      div.querySelector('.follow-btn').onclick = async (e) => {
        e.stopPropagation();
        await toggleFollow(uid);
        loadSearchUsers();
      };
      div.onclick = () => viewProfile(uid);
      userList.appendChild(div);
    });
  }
  document.getElementById('searchInput').addEventListener('input', loadSearchUsers);

  async function toggleFollow(targetUid) {
    if (!currentUser) return;
    const myRef = doc(db, "users", currentUser.uid);
    const targetRef = doc(db, "users", targetUid);
    const mySnap = await getDoc(myRef);
    const following = mySnap.data().following || [];
    if (following.includes(targetUid)) {
      await updateDoc(myRef, { following: arrayRemove(targetUid) });
      await updateDoc(targetRef, { followers: arrayRemove(currentUser.uid) });
    } else {
      await updateDoc(myRef, { following: arrayUnion(targetUid) });
      await updateDoc(targetRef, { followers: arrayUnion(currentUser.uid) });
    }
  }

  // ================= –ü—Ä–æ—Ñ—ñ–ª—å =================
  async function loadMyProfile() {
    if (!currentUser) return;
    const snap = await getDoc(doc(db, "users", currentUser.uid));
    if (snap.exists()) renderProfile(snap.data(), currentUser.uid, true);
  }

  function viewProfile(uid) {
    if (uid === currentUser?.uid) loadMyProfile();
    else loadUserProfile(uid);
    document.querySelector('[data-section="profile"]').click();
  }

  async function loadUserProfile(uid) {
    if (!currentUser) return;
    const snap = await getDoc(doc(db, "users", uid));
    if (snap.exists()) renderProfile(snap.data(), uid, uid === currentUser.uid);
  }

  function renderProfile(data, uid, isOwn) {
    const header = document.getElementById('profileHeader');
    const isFollowing = !isOwn && currentUser ? (data.followers?.includes(currentUser.uid) || false) : false;
    header.innerHTML = `
      <div class="avatar large" style="background-image:url(${data.avatar || ''})" data-uid="${uid}"></div>
      <div>
        <h2>${data.nickname}</h2>
        <div class="user-id">${data.userId}</div>
        <p>${data.bio || ''}</p>
        <div class="profile-stats">
          <span>${data.posts?.length || 0} –ø–æ—Å—Ç—ñ–≤</span>
          <span>${data.followers?.length || 0} –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤</span>
          <span>${data.following?.length || 0} –ø—ñ–¥–ø–∏—Å–æ–∫</span>
        </div>
        ${!isOwn && currentUser ? `
          <div style="display:flex; gap:10px; margin-top:10px;">
            <button class="btn" id="profileFollowBtn">${isFollowing ? '–í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è' : '–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è'}</button>
            <button class="btn" id="profileMessageBtn">${translations[currentLanguage]['nav.chats'] || '–ù–∞–ø–∏—Å–∞—Ç–∏'}</button>
          </div>
        ` : ''}
        ${isOwn ? '<button class="btn" id="editProfileBtn">' + (translations[currentLanguage]['profile.editTitle'] || '–†–µ–¥–∞–≥—É–≤–∞—Ç–∏') + '</button>' : ''}
      </div>
    `;
    if (!isOwn && currentUser) {
      document.getElementById('profileFollowBtn').onclick = async () => {
        await toggleFollow(uid);
        loadUserProfile(uid);
      };
      document.getElementById('profileMessageBtn').onclick = () => {
        openChat(data.nickname, uid, data.userId);
      };
    }
    if (isOwn) {
      document.getElementById('editProfileBtn').onclick = () => {
        document.getElementById('editNickname').value = data.nickname;
        document.getElementById('editBio').value = data.bio || '';
        document.getElementById('editProfileModal').classList.add('active');
      };
    }
    
    const tabs = document.getElementById('profileTabs');
    tabs.innerHTML = `
      <div class="profile-tab active" data-tab="posts">${translations[currentLanguage]['feed.new'] || '–ü–æ—Å—Ç–∏'}</div>
      <div class="profile-tab" data-tab="likes">${translations[currentLanguage]['feed.popular'] || '–õ–∞–π–∫–∏'}</div>
      <div class="profile-tab" data-tab="media">–ú–µ–¥—ñ–∞</div>
      <div class="profile-tab" data-tab="saved">–ó–±–µ—Ä–µ–∂–µ–Ω–µ</div>
    `;
    document.querySelectorAll('.profile-tab').forEach(tab => {
      tab.onclick = () => {
        document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        loadProfileFeed(uid, tab.dataset.tab);
      };
    });
    loadProfileFeed(uid, 'posts');
  }

  async function loadProfileFeed(uid, tab) {
    if (!currentUser) return;
    const feed = document.getElementById('profileFeed');
    feed.innerHTML = '';
    let posts = [];
    const userSnap = await getDoc(doc(db, "users", uid));
    const userData = userSnap.data();
    
    if (tab === 'posts') {
      const postIds = userData.posts || [];
      for (const id of postIds.slice(0, 20)) {
        const postSnap = await getDoc(doc(db, "posts", id));
        if (postSnap.exists()) posts.push({ id, ...postSnap.data() });
      }
    } else if (tab === 'likes') {
      const likedIds = userData.likedPosts || [];
      for (const id of likedIds.slice(0, 20)) {
        const postSnap = await getDoc(doc(db, "posts", id));
        if (postSnap.exists()) posts.push({ id, ...postSnap.data() });
      }
    } else if (tab === 'media') {
      const q = query(collection(db, "posts"), where("author", "==", uid), where("mediaUrl", "!=", ""));
      const snap = await getDocs(q);
      snap.forEach(d => posts.push({ id: d.id, ...d.data() }));
    } else if (tab === 'saved') {
      const savedIds = userData.savedPosts || [];
      for (const id of savedIds.slice(0, 20)) {
        const postSnap = await getDoc(doc(db, "posts", id));
        if (postSnap.exists()) posts.push({ id, ...postSnap.data() });
      }
    }
    
    posts.forEach(post => {
      const div = document.createElement('div');
      div.className = 'post';
      div.innerHTML = `<div class="post-content">${post.text || ''}</div>`;
      feed.appendChild(div);
    });
  }

  document.getElementById('closeModal').onclick = () => document.getElementById('editProfileModal').classList.remove('active');
  document.getElementById('saveProfileEdit').onclick = async () => {
    if (!currentUser) return;
    const nickname = document.getElementById('editNickname').value.trim();
    const bio = document.getElementById('editBio').value.trim();
    if (!nickname) return alert('–ü—Å–µ–≤–¥–æ–Ω—ñ–º –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π');
    const newUserId = `@${nickname.toLowerCase()}`;
    const q = query(collection(db, "users"), where("userId", "==", newUserId));
    const snap = await getDocs(q);
    if (!snap.empty && snap.docs[0].id !== currentUser.uid) return alert('–¶–µ–π ID –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π');
    await updateDoc(doc(db, "users", currentUser.uid), { nickname, userId: newUserId, nickname_lower: nickname.toLowerCase(), bio });
    loadMyProfile();
    document.getElementById('editProfileModal').classList.remove('active');
    showToast('–ü—Ä–æ—Ñ—ñ–ª—å –æ–Ω–æ–≤–ª–µ–Ω–æ');
  };

  // ================= –ß–∞—Ç–∏ =================
  async function loadChatList() {
    if (!currentUser) return;
    const list = document.getElementById('chatList');
    list.innerHTML = '';
    
    if (unsubscribeChatList) unsubscribeChatList();
    const q = query(collection(db, "chats"), where("participants", "array-contains", currentUser.uid), orderBy("updatedAt", "desc"));
    unsubscribeChatList = onSnapshot(q, async (snapshot) => {
      list.innerHTML = '';
      for (const docSnap of snapshot.docs) {
        const chat = docSnap.data();
        const otherUid = chat.participants.find(uid => uid !== currentUser.uid);
        if (!otherUid) continue;
        
        const userSnap = await getDoc(doc(db, "users", otherUid));
        const user = userSnap.data();
        if (!user) continue;
        
        const unread = chat.unread?.[currentUser.uid] || 0;
        const lastMsg = chat.lastMessage || '';
        const time = chat.updatedAt ? new Date(chat.updatedAt.seconds * 1000).toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' }) : '';
        const lastOnline = user.lastOnline?.seconds || 0;
        const isOnline = (Date.now()/1000 - lastOnline) < 60;
        
        const item = document.createElement('div');
        item.className = `chat-item ${unread > 0 ? 'unread' : ''}`;
        item.dataset.chatId = docSnap.id;
        item.dataset.otherUid = otherUid;
        item.innerHTML = `
          <div class="avatar small ${isOnline ? 'online' : ''}" style="background-image:url(${user.avatar || ''})"></div>
          <div class="chat-info">
            <div class="chat-name">${user.nickname}</div>
            <div class="chat-last">${lastMsg}</div>
          </div>
          <div class="chat-time">${time}</div>
          ${unread > 0 ? `<div class="chat-badge">${unread}</div>` : ''}
        `;
        item.onclick = () => openChatFromList(docSnap.id, otherUid, user.nickname, user.userId, user.avatar);
        list.appendChild(item);
      }
    });
  }

  async function openChatFromList(chatId, otherUid, otherName, otherUserId, otherAvatar) {
    if (!currentUser) return;
    currentChatPartner = otherUid;
    document.getElementById('chatWindow').style.display = 'flex';
    document.getElementById('chatName').textContent = otherName;
    document.getElementById('chatUserId').textContent = otherUserId || '';
    document.getElementById('chatAvatar').style.backgroundImage = `url(${otherAvatar || ''})`;
    
    const chatRef = doc(db, "chats", chatId);
    await updateDoc(chatRef, { [`unread.${currentUser.uid}`]: 0 });
    
    subscribeToChat(chatId);
    
    const userSnap = await getDoc(doc(db, "users", otherUid));
    const lastOnline = userSnap.data().lastOnline?.seconds || 0;
    const isOnline = (Date.now()/1000 - lastOnline) < 60;
    document.getElementById('onlineIndicator').style.display = isOnline ? 'inline-block' : 'none';
  }

  function openChat(otherName, otherUid, otherUserId) {
    if (!currentUser) return;
    currentChatPartner = otherUid;
    document.getElementById('chatWindow').style.display = 'flex';
    document.getElementById('chatName').textContent = otherName;
    document.getElementById('chatUserId').textContent = otherUserId || '';
    
    getDoc(doc(db, "users", otherUid)).then(snap => {
      if (snap.exists()) {
        document.getElementById('chatAvatar').style.backgroundImage = `url(${snap.data().avatar || ''})`;
        const lastOnline = snap.data().lastOnline?.seconds || 0;
        const isOnline = (Date.now()/1000 - lastOnline) < 60;
        document.getElementById('onlineIndicator').style.display = isOnline ? 'inline-block' : 'none';
      }
    });
    
    const chatId = getChatId(currentUser.uid, otherUid);
    const chatRef = doc(db, "chats", chatId);
    getDoc(chatRef).then(async (docSnap) => {
      if (!docSnap.exists()) {
        await setDoc(chatRef, {
          participants: [currentUser.uid, otherUid],
          createdAt: serverTimestamp(),
          updatedAt: serverTimestamp(),
          lastMessage: '',
          unread: { [currentUser.uid]: 0, [otherUid]: 0 }
        });
      } else {
        await updateDoc(chatRef, { [`unread.${currentUser.uid}`]: 0 });
      }
      subscribeToChat(chatId);
    });
  }

  const getChatId = (uid1, uid2) => [uid1, uid2].sort().join('_');

  function subscribeToChat(chatId) {
    if (!currentUser) return;
    if (unsubscribeChat) unsubscribeChat();
    if (unsubscribeTyping) unsubscribeTyping();
    
    const q = query(collection(db, `chats/${chatId}/messages`), orderBy("createdAt"));
    unsubscribeChat = onSnapshot(q, (snap) => {
      const messages = document.getElementById('chatMessages');
      messages.innerHTML = '';
      snap.forEach(m => {
        const msg = m.data();
        const div = document.createElement('div');
        div.className = `message ${msg.from === currentUser.uid ? 'sent' : 'received'} ${msg.mediaUrl ? 'media' : ''}`;
        if (msg.text) div.textContent = msg.text;
        if (msg.mediaUrl) {
          if (msg.mediaType === 'image') {
            div.innerHTML += `<img src="${msg.mediaUrl}" class="message-media">`;
          } else if (msg.mediaType === 'video') {
            div.innerHTML += `<video src="${msg.mediaUrl}" controls class="message-media"></video>`;
          } else if (msg.mediaType === 'audio') {
            div.innerHTML += `<audio src="${msg.mediaUrl}" controls class="message-media"></audio>`;
          }
        }
        messages.appendChild(div);
      });
      messages.scrollTop = messages.scrollHeight;
    });
    
    // –°—Ç–µ–∂–∏–º–æ –∑–∞ –Ω–∞–±–æ—Ä–æ–º —Ç–µ–∫—Å—Ç—É —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞
    if (currentChatPartner) {
      const typingRef = doc(db, `chats/${chatId}/typing/${currentChatPartner}`);
      unsubscribeTyping = onSnapshot(typingRef, (docSnap) => {
        document.getElementById('typingIndicator').style.display = docSnap.exists() && docSnap.data().isTyping ? 'block' : 'none';
      });
    }
  }

  document.getElementById('chatText').addEventListener('input', () => {
    if (!currentUser || !currentChatPartner) return;
    const chatId = getChatId(currentUser.uid, currentChatPartner);
    const typingRef = doc(db, `chats/${chatId}/typing/${currentUser.uid}`);
    setDoc(typingRef, { isTyping: true }, { merge: true });
    clearTimeout(window.typingTimeout);
    window.typingTimeout = setTimeout(() => setDoc(typingRef, { isTyping: false }, { merge: true }), 2000);
  });

  document.getElementById('sendMessage').onclick = async () => {
    const text = document.getElementById('chatText').value.trim();
    const file = document.getElementById('chatMedia').files[0];
    if (!text && !file) return;
    if (!currentUser || !currentChatPartner) return;

    try {
      let mediaUrl = '', mediaType = '';
      if (file) {
        const uploaded = await uploadMedia(file, `chat/${currentUser.uid}`);
        mediaUrl = uploaded.url;
        mediaType = uploaded.type;
      }

      const chatId = getChatId(currentUser.uid, currentChatPartner);
      const chatRef = doc(db, "chats", chatId);
      const messageRef = collection(db, `chats/${chatId}/messages`);
      await addDoc(messageRef, { 
        from: currentUser.uid, 
        text, 
        mediaUrl, 
        mediaType,
        createdAt: serverTimestamp() 
      });
      await updateDoc(chatRef, {
        lastMessage: text || '–ú–µ–¥—ñ–∞',
        updatedAt: serverTimestamp(),
        [`unread.${currentChatPartner}`]: increment(1)
      });
      document.getElementById('chatText').value = '';
      document.getElementById('chatMedia').value = '';
      
      const typingRef = doc(db, `chats/${chatId}/typing/${currentUser.uid}`);
      setDoc(typingRef, { isTyping: false }, { merge: true });
    } catch (e) { showToast(e.message); }
  };

  // ================= –ì—Ä—É–ø–∏ =================
  document.getElementById('createGroupBtn').onclick = () => document.getElementById('createGroupModal').classList.add('active');
  document.getElementById('closeGroupModal').onclick = () => document.getElementById('createGroupModal').classList.remove('active');
  document.getElementById('saveGroup').onclick = async () => {
    if (!currentUser) return;
    const name = document.getElementById('groupName').value.trim();
    const desc = document.getElementById('groupDesc').value.trim();
    const file = document.getElementById('groupAvatar').files[0];
    if (!name) return alert('–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É');
    
    let avatarUrl = '';
    if (file) {
      const storageRef = ref(storage, `groups/${Date.now()}_${file.name}`);
      await uploadBytes(storageRef, file);
      avatarUrl = await getDownloadURL(storageRef);
    }
    
    const groupRef = await addDoc(collection(db, "groups"), {
      name,
      description: desc,
      avatar: avatarUrl,
      createdBy: currentUser.uid,
      members: [{ uid: currentUser.uid, role: 'admin' }],
      createdAt: serverTimestamp(),
      lastMessage: '',
      updatedAt: serverTimestamp()
    });
    showToast('–ì—Ä—É–ø—É —Å—Ç–≤–æ—Ä–µ–Ω–æ');
    document.getElementById('createGroupModal').classList.remove('active');
    loadGroups();
  };

  async function loadGroups() {
    if (!currentUser) return;
    const list = document.getElementById('groupList');
    list.innerHTML = '';
    
    if (unsubscribeGroups) unsubscribeGroups();
    const q = query(collection(db, "groups"), orderBy("updatedAt", "desc"));
    unsubscribeGroups = onSnapshot(q, (snapshot) => {
      list.innerHTML = '';
      snapshot.forEach(docSnap => {
        const group = docSnap.data();
        const isMember = group.members.some(m => m.uid === currentUser?.uid);
        if (!isMember) return;
        
        const item = document.createElement('div');
        item.className = 'group-item';
        item.dataset.groupId = docSnap.id;
        item.innerHTML = `
          <div class="group-avatar" style="background-image:url(${group.avatar || ''})"></div>
          <div class="group-info">
            <div class="group-name">${group.name}</div>
            <div class="group-meta">${group.members.length} —É—á–∞—Å–Ω–∏–∫—ñ–≤</div>
          </div>
        `;
        item.onclick = () => openGroup(docSnap.id, group);
        list.appendChild(item);
      });
    });
  }

  function openGroup(groupId, group) {
    if (!currentUser) return;
    currentGroup = { id: groupId, ...group };
    document.getElementById('groupChatWindow').style.display = 'flex';
    document.getElementById('groupChatName').textContent = group.name;
    document.getElementById('groupChatAvatar').style.backgroundImage = `url(${group.avatar || ''})`;
    document.getElementById('groupChatMeta').textContent = `${group.members.length} —É—á–∞—Å–Ω–∏–∫—ñ–≤`;
    
    if (unsubscribeGroup) unsubscribeGroup();
    const q = query(collection(db, `groups/${groupId}/messages`), orderBy("createdAt"));
    unsubscribeGroup = onSnapshot(q, (snap) => {
      const messages = document.getElementById('groupChatMessages');
      messages.innerHTML = '';
      snap.forEach(m => {
        const msg = m.data();
        const div = document.createElement('div');
        div.className = `message ${msg.from === currentUser.uid ? 'sent' : 'received'} ${msg.mediaUrl ? 'media' : ''}`;
        if (msg.text) div.textContent = `${msg.senderName}: ${msg.text}`;
        if (msg.mediaUrl) {
          if (msg.mediaType === 'image') {
            div.innerHTML += `<img src="${msg.mediaUrl}" class="message-media">`;
          } else if (msg.mediaType === 'video') {
            div.innerHTML += `<video src="${msg.mediaUrl}" controls class="message-media"></video>`;
          } else if (msg.mediaType === 'audio') {
            div.innerHTML += `<audio src="${msg.mediaUrl}" controls class="message-media"></audio>`;
          }
        }
        messages.appendChild(div);
      });
      messages.scrollTop = messages.scrollHeight;
    });
  }

  document.getElementById('groupMembersBtn').onclick = () => {
    const modal = document.getElementById('groupMembersModal');
    const list = document.getElementById('membersList');
    list.innerHTML = '';
    
    (async () => {
      for (const m of currentGroup.members) {
        const userSnap = await getDoc(doc(db, "users", m.uid));
        const user = userSnap.data();
        const div = document.createElement('div');
        div.className = 'chat-item';
        div.innerHTML = `
          <div class="avatar small" style="background-image:url(${user.avatar || ''})"></div>
          <div class="chat-info">
            <div class="chat-name">${user.nickname} (${m.role})</div>
          </div>
          ${(m.uid === currentUser.uid || currentGroup.members.find(mm => mm.uid === currentUser.uid)?.role === 'admin') && m.uid !== currentUser.uid ? `
            <button class="btn remove-member" data-uid="${m.uid}">–í–∏–¥–∞–ª–∏—Ç–∏</button>
          ` : ''}
        `;
        div.querySelectorAll('.remove-member').forEach(btn => {
          btn.onclick = async (e) => {
            e.stopPropagation();
            if (confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —É—á–∞—Å–Ω–∏–∫–∞?')) {
              await updateDoc(doc(db, "groups", currentGroup.id), {
                members: arrayRemove({ uid: m.uid, role: m.role })
              });
              showToast('–£—á–∞—Å–Ω–∏–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–æ');
              modal.classList.remove('active');
            }
          };
        });
        list.appendChild(div);
      }
    })();
    
    modal.classList.add('active');
  };
  
  document.getElementById('closeGroupMembers').onclick = () => document.getElementById('groupMembersModal').classList.remove('active');
  
  document.getElementById('addMemberBtn').onclick = async () => {
    const input = document.getElementById('addMemberInput').value.trim();
    if (!input || !currentGroup) return;
    const userId = input.startsWith('@') ? input : `@${input}`;
    const q = query(collection(db, "users"), where("userId", "==", userId));
    const snap = await getDocs(q);
    if (snap.empty) return alert('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
    const targetUid = snap.docs[0].id;
    if (currentGroup.members.some(m => m.uid === targetUid)) return alert('–í–∂–µ –≤ –≥—Ä—É–ø—ñ');
    await updateDoc(doc(db, "groups", currentGroup.id), {
      members: arrayUnion({ uid: targetUid, role: 'user' })
    });
    showToast('–£—á–∞—Å–Ω–∏–∫–∞ –¥–æ–¥–∞–Ω–æ');
    document.getElementById('addMemberInput').value = '';
  };

  document.getElementById('sendGroupMessage').onclick = async () => {
    const text = document.getElementById('groupChatText').value.trim();
    const file = document.getElementById('groupChatMedia').files[0];
    if (!text && !file) return;
    if (!currentGroup || !currentUser) return;

    try {
      let mediaUrl = '', mediaType = '';
      if (file) {
        const uploaded = await uploadMedia(file, `group/${currentGroup.id}`);
        mediaUrl = uploaded.url;
        mediaType = uploaded.type;
      }

      const userSnap = await getDoc(doc(db, "users", currentUser.uid));
      const user = userSnap.data();
      await addDoc(collection(db, `groups/${currentGroup.id}/messages`), {
        from: currentUser.uid,
        senderName: user.nickname,
        text,
        mediaUrl,
        mediaType,
        createdAt: serverTimestamp()
      });
      await updateDoc(doc(db, "groups", currentGroup.id), {
        lastMessage: text || '–ú–µ–¥—ñ–∞',
        updatedAt: serverTimestamp()
      });
      document.getElementById('groupChatText').value = '';
      document.getElementById('groupChatMedia').value = '';
    } catch (e) { showToast(e.message); }
  };

  // ================= –ö–∞–Ω–∞–ª–∏ =================
  document.getElementById('createChannelBtn').onclick = () => document.getElementById('createChannelModal').classList.add('active');
  document.getElementById('closeChannelModal').onclick = () => document.getElementById('createChannelModal').classList.remove('active');
  document.getElementById('saveChannel').onclick = async () => {
    if (!currentUser) return;
    const name = document.getElementById('channelName').value.trim();
    const desc = document.getElementById('channelDesc').value.trim();
    const file = document.getElementById('channelAvatar').files[0];
    if (!name) return alert('–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É');
    
    let avatarUrl = '';
    if (file) {
      const storageRef = ref(storage, `channels/${Date.now()}_${file.name}`);
      await uploadBytes(storageRef, file);
      avatarUrl = await getDownloadURL(storageRef);
    }
    
    await addDoc(collection(db, "channels"), {
      name,
      description: desc,
      avatar: avatarUrl,
      createdBy: currentUser.uid,
      subscribers: [currentUser.uid],
      createdAt: serverTimestamp()
    });
    showToast('–ö–∞–Ω–∞–ª —Å—Ç–≤–æ—Ä–µ–Ω–æ');
    document.getElementById('createChannelModal').classList.remove('active');
    loadChannels();
  };

  async function loadChannels() {
    if (!currentUser) return;
    const list = document.getElementById('channelList');
    list.innerHTML = '';
    
    if (unsubscribeChannels) unsubscribeChannels();
    const q = query(collection(db, "channels"), orderBy("createdAt", "desc"));
    unsubscribeChannels = onSnapshot(q, (snapshot) => {
      list.innerHTML = '';
      snapshot.forEach(docSnap => {
        const channel = docSnap.data();
        const isSubscribed = channel.subscribers.includes(currentUser.uid);
        const item = document.createElement('div');
        item.className = 'channel-item';
        item.dataset.channelId = docSnap.id;
        item.innerHTML = `
          <div class="channel-avatar" style="background-image:url(${channel.avatar || ''})"></div>
          <div class="channel-info">
            <div class="channel-name">${channel.name}</div>
            <div class="channel-meta">${channel.subscribers.length} –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤</div>
          </div>
          <button class="btn subscribe-btn">${isSubscribed ? '–í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è' : '–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è'}</button>
        `;
        item.querySelector('.subscribe-btn').onclick = async (e) => {
          e.stopPropagation();
          if (isSubscribed) {
            await updateDoc(doc(db, "channels", docSnap.id), { subscribers: arrayRemove(currentUser.uid) });
          } else {
            await updateDoc(doc(db, "channels", docSnap.id), { subscribers: arrayUnion(currentUser.uid) });
          }
        };
        item.onclick = () => openChannel(docSnap.id, channel);
        list.appendChild(item);
      });
    });
  }

  function openChannel(channelId, channel) {
    if (!currentUser) return;
    currentChannel = { id: channelId, ...channel };
    document.getElementById('channelView').style.display = 'block';
    document.getElementById('channelHeader').innerHTML = `
      <div style="display:flex; gap:20px;">
        <div class="avatar large" style="background-image:url(${channel.avatar || ''})"></div>
        <div>
          <h2>${channel.name}</h2>
          <p>${channel.description || ''}</p>
          <div>–ü—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤: ${channel.subscribers.length}</div>
        </div>
      </div>
    `;
    document.getElementById('newChannelPostBox').style.display = channel.createdBy === currentUser.uid ? 'block' : 'none';
    
    if (unsubscribeChannel) unsubscribeChannel();
    const q = query(collection(db, `channels/${channelId}/posts`), orderBy("createdAt", "desc"));
    unsubscribeChannel = onSnapshot(q, (snap) => {
      const feed = document.getElementById('channelFeed');
      feed.innerHTML = '';
      snap.forEach(doc => {
        const post = doc.data();
        let mediaHtml = '';
        if (post.mediaUrl) {
          if (post.mediaType === 'image') mediaHtml = `<img src="${post.mediaUrl}" class="post-media">`;
          else if (post.mediaType === 'video') mediaHtml = `<video src="${post.mediaUrl}" controls class="post-media"></video>`;
          else if (post.mediaType === 'audio') mediaHtml = `<audio src="${post.mediaUrl}" controls class="post-media"></audio>`;
        }
        const postEl = document.createElement('div');
        postEl.className = 'post';
        postEl.innerHTML = `
          <div class="post-content">${post.text || ''}</div>
          ${mediaHtml}
        `;
        feed.appendChild(postEl);
      });
    });
  }

  document.getElementById('addChannelPost').onclick = async () => {
    if (!currentChannel || !currentUser) return;
    const text = document.getElementById('channelPostText').value.trim();
    const file = document.getElementById('channelPostMedia').files[0];
    if (!text && !file) return;
    
    let mediaUrl = '', mediaType = '';
    if (file) {
      const uploaded = await uploadMedia(file, `channelPosts/${currentChannel.id}`);
      mediaUrl = uploaded.url;
      mediaType = uploaded.type;
    }
    
    await addDoc(collection(db, `channels/${currentChannel.id}/posts`), {
      text,
      mediaUrl,
      mediaType,
      createdAt: serverTimestamp()
    });
    document.getElementById('channelPostText').value = '';
    document.getElementById('channelPostMedia').value = '';
    showToast('–ü–æ—Å—Ç –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ');
  };

  // ================= –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è =================
  document.getElementById('toggleTheme').onclick = () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
  };
  if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');

  document.getElementById('privacyPolicyBtn').onclick = () => {
    document.getElementById('privacyPolicyModal').classList.add('active');
  };
  document.getElementById('closePrivacyModal').onclick = () => {
    document.getElementById('privacyPolicyModal').classList.remove('active');
  };

  document.getElementById('logoutBtn').onclick = () => {
    cleanupListeners();
    signOut(auth);
  };

  // Language selector
  const langSelect = document.getElementById('languageSelect');
  langSelect.value = currentLanguage;
  langSelect.addEventListener('change', (e) => {
    currentLanguage = e.target.value;
    localStorage.setItem('language', currentLanguage);
    applyLanguage(currentLanguage);
    // –û–Ω–æ–≤–∏—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    const activeSection = document.querySelector('.section.active').id;
    const pageTitle = document.getElementById('pageTitle');
    if (pageTitle) {
      pageTitle.textContent = translations[currentLanguage]['pages.' + activeSection] || activeSection;
    }
  });
  applyLanguage(currentLanguage);

  // ================= –Ü–Ω—à—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ =================
  const sentinel = document.getElementById('feedSentinel');
  const observer = new IntersectionObserver((entries) => {
    if (entries[0].isIntersecting) loadMorePosts();
  }, { threshold: 0.5 });
  observer.observe(sentinel);

  // –õ–∞–π–∫–∏, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è, —à–µ—Ä–∏–Ω–≥ (–¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è)
  document.addEventListener('click', async (e) => {
    if (!currentUser) return;
    const target = e.target.closest('button');
    if (!target) return;
    
    if (target.classList.contains('like-btn')) {
      const postId = target.dataset.postId;
      const liked = target.classList.contains('liked');
      const countSpan = target.querySelector('span');
      const oldCount = parseInt(countSpan.textContent);
      target.classList.toggle('liked');
      countSpan.textContent = liked ? oldCount - 1 : oldCount + 1;
      try {
        const postRef = doc(db, "posts", postId);
        if (liked) {
          await updateDoc(postRef, { likes: arrayRemove(currentUser.uid), likesCount: increment(-1) });
          await updateDoc(doc(db, "users", currentUser.uid), { likedPosts: arrayRemove(postId) });
        } else {
          await updateDoc(postRef, { likes: arrayUnion(currentUser.uid), likesCount: increment(1) });
          await updateDoc(doc(db, "users", currentUser.uid), { likedPosts: arrayUnion(postId) });
          vibrate(30);
        }
      } catch {
        target.classList.toggle('liked');
        countSpan.textContent = oldCount;
      }
    }
    
    if (target.classList.contains('save-btn')) {
      const postId = target.dataset.postId;
      const saved = target.classList.contains('saved');
      target.classList.toggle('saved');
      try {
        const userRef = doc(db, "users", currentUser.uid);
        const postRef = doc(db, "posts", postId);
        if (saved) {
          await updateDoc(userRef, { savedPosts: arrayRemove(postId) });
          await updateDoc(postRef, { saves: arrayRemove(currentUser.uid) });
        } else {
          await updateDoc(userRef, { savedPosts: arrayUnion(postId) });
          await updateDoc(postRef, { saves: arrayUnion(currentUser.uid) });
        }
      } catch { target.classList.toggle('saved'); }
    }
    
    if (target.classList.contains('share-btn')) {
      const postId = target.dataset.postId;
      const postSnap = await getDoc(doc(db, "posts", postId));
      const post = postSnap.data();
      if (navigator.share) {
        navigator.share({ title: '–ü–æ—Å—Ç –≤—ñ–¥ ' + post.authorName, text: post.text }).catch(() => {});
      } else {
        navigator.clipboard.writeText(post.text);
        showToast('–¢–µ–∫—Å—Ç —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ');
      }
    }
  });

  document.addEventListener('click', (e) => {
    if (e.target.closest('[data-uid]')) {
      const uid = e.target.closest('[data-uid]').dataset.uid;
      viewProfile(uid);
    }
  });
</script>
</body>
</html>
